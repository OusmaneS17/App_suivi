{% extends "dashboard_app/base.html" %}


{% block titre%} Dashboard {% endblock %}

{% block content %}

{% load static %}


  <main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg ">
  
    
  <!-- Navbar -->
    <br>
    <nav class="navbar navbar-main navbar-expand-lg px-0 mx-3 shadow-sm border-radius-xl position-sticky blur border-radius-lg" id="navbarBlur" data-scroll="true" style="backdrop-filter: blur(10px); z-index: 1030;">
      <div class="container-fluid py-1 px-3">
        <div class="navbar-brand d-flex align-items-center">
          <span class="font-weight-bold text-lg" style="color: #004600;">Bonjour, <span  style="color: #004600;"> {{ request.user.username }}</span></span>
        </div>
        
        <div class="collapse navbar-collapse mt-sm-0 mt-2 me-md-0 me-sm-4 justify-content-end" id="navbar">
          <ul class="navbar-nav d-flex align-items-center">
            
            <!-- Notification Dropdown -->
            <li class="nav-item dropdown pe-3 d-flex align-items-center">
              <a href="javascript:;" class="nav-link text-body p-0 position-relative" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="material-symbols-rounded cursor-pointer transition-all hover:text-primary">notifications</i>
                <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">3</span>
              </a>
              <ul class="dropdown-menu dropdown-menu-end px-2 py-3 me-sm-n4 animate__animated animate__fadeIn animate__faster" aria-labelledby="dropdownMenuButton" style="min-width: 360px;">
                <li class="mb-2">
                  <a class="dropdown-item border-radius-md transition-all hover:bg-gray-100" href="javascript:;">
                    <div class="d-flex py-1">
                      <div class="my-auto">
                        <img src="#" class="avatar avatar-sm me-3 bg-gradient-faded-info">
                      </div>
                      <div class="d-flex flex-column justify-content-center">
                        <h6 class="text-sm font-weight-normal mb-1">
                          <span class="font-weight-bold text-dark">New message</span> from Laur
                        </h6>
                        <p class="text-xs text-muted mb-0">
                          <i class="fa fa-clock me-1 opacity-6"></i>
                          13 minutes ago
                        </p>
                      </div>
                    </div>
                  </a>
                </li>
                <li class="mb-2">
                  <a class="dropdown-item border-radius-md transition-all hover:bg-gray-100" href="javascript:;">
                    <div class="d-flex py-1">
                      <div class="my-auto">
                        <img src="#" class="avatar avatar-sm bg-gradient-dark me-3">
                      </div>
                      <div class="d-flex flex-column justify-content-center">
                        <h6 class="text-sm font-weight-normal mb-1">
                          <span class="font-weight-bold text-dark">New album</span> by Travis Scott
                        </h6>
                        <p class="text-xs text-muted mb-0">
                          <i class="fa fa-clock me-1 opacity-6"></i>
                          1 day
                        </p>
                      </div>
                    </div>
                  </a>
                </li>
                <li>
                  <a class="dropdown-item border-radius-md transition-all hover:bg-gray-100" href="javascript:;">
                    <div class="d-flex py-1">
                      <div class="avatar avatar-sm bg-gradient-secondary me-3 my-auto">
                        <svg width="12px" height="12px" viewBox="0 0 43 36" version="1.1">
                          <title>credit-card</title>
                          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <g transform="translate(-2169.000000, -745.000000)" fill="#FFFFFF" fill-rule="nonzero">
                              <g transform="translate(1716.000000, 291.000000)">
                                <g transform="translate(453.000000, 454.000000)">
                                  <path class="color-background" d="M43,10.7482083 L43,3.58333333 C43,1.60354167 41.3964583,0 39.4166667,0 L3.58333333,0 C1.60354167,0 0,1.60354167 0,3.58333333 L0,10.7482083 L43,10.7482083 Z" opacity="0.593633743"></path>
                                  <path class="color-background" d="M0,16.125 L0,32.25 C0,34.2297917 1.60354167,35.8333333 3.58333333,35.8333333 L39.4166667,35.8333333 C41.3964583,35.8333333 43,34.2297917 43,32.25 L43,16.125 L0,16.125 Z M19.7083333,26.875 L7.16666667,26.875 L7.16666667,23.2916667 L19.7083333,23.2916667 L19.7083333,26.875 Z M35.8333333,26.875 L28.6666667,26.875 L28.6666667,23.2916667 L35.8333333,23.2916667 L35.8333333,26.875 Z"></path>
                                </g>
                              </g>
                            </g>
                          </g>
                        </svg>
                      </div>
                      <div class="d-flex flex-column justify-content-center">
                        <h6 class="text-sm font-weight-normal mb-1">
                          <span class="text-dark">Payment</span> successfully completed
                        </h6>
                        <p class="text-xs text-muted mb-0">
                          <i class="fa fa-clock me-1 opacity-6"></i>
                          2 days
                        </p>
                      </div>
                    </div>
                  </a>
                </li>
              </ul>
            </li>
            
            <!-- User Profile Dropdown -->
            <li class="nav-item dropdown d-flex align-items-center ps-2">
              <a href="javascript:;" class="nav-link text-body font-weight-bold px-0 d-flex align-items-center" id="userProfileDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="material-symbols-rounded me-2 text-dark cursor-pointer transition-all hover:text-primary">account_circle</i>
                <span class="d-none d-sm-inline text-sm text-dark">{{ request.user.username }}</span>
              </a>
              <ul class="dropdown-menu dropdown-menu-end px-2 py-3 me-sm-n4 animate__animated animate__fadeIn animate__faster" aria-labelledby="userProfileDropdown">
                <li class="mb-2">
                  <a class="dropdown-item border-radius-md transition-all hover:bg-gray-100" href="{% url 'profile' %}">
                    <div class="d-flex py-1 align-items-center" >
                      <i class="material-symbols-rounded text-primary me-3">person</i>
                      <h6 class="text-sm font-weight-normal mb-0 text-dark">
                        Mon Profil
                      </h6>
                    </div>
                  </a>
                </li>
                <!-- <li class="mb-2">
                  <a class="dropdown-item border-radius-md transition-all hover:bg-gray-100" href="javascript:;">
                    <div class="d-flex py-1 align-items-center">
                      <i class="material-symbols-rounded text-primary me-3">settings</i>
                      <h6 class="text-sm font-weight-normal mb-0 text-dark">
                        Paramètres
                      </h6>
                    </div>
                  </a>
                </li> -->
                <li>
                  <a class="dropdown-item border-radius-md transition-all hover:bg-gray-100" href="{% url 'log_out' %}">
                    <div class="d-flex py-1 align-items-center">
                      <i class="material-symbols-rounded text-danger me-3">logout</i>
                      <h6 class="text-sm font-weight-normal mb-0 text-dark">
                        Déconnexion
                      </h6>
                    </div>
                  </a>
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- End Navbar -->
    <div class="container-fluid py-2">
      <!-- premier ligne -->
      <div class="row">
        <div class="row g-1">
          <!-- Carte 1 - Ministère -->
          <div class="col-xl-2 col-lg-4 col-md-4 col-sm-6 mb-1">
            <div class="card h-100 mb-0 shadow-sm border-0" style="background-color: #f8f9fa;">
              <div class="card-header p-2" style="background: linear-gradient(135deg, #004600, #007a00); font-weight: 600; color: white; border-top-left-radius: .5rem; border-top-right-radius: .5rem;">
                <div class="d-flex justify-content-between align-items-center">
                  <h6 class="mb-0 fw-bold" style="color: #ffffff">Ministère</h6>
                  <div class="icon icon-sm icon-shape bg-white shadow-sm text-center rounded-circle" style="color: #004600;">
                    <i class="material-symbols-rounded opacity-10">weekend</i>
                  </div>
                </div>
              </div>
          
              <hr class="my-1 mx-3" style="border-top: 1px solid #004600;">
          
              <div class="dropdown card-footer p-2 border-top-0">
                <button 
                  class="btn btn-outline-success dropdown-toggle w-100 d-flex align-items-center justify-content-between"
                  type="button" 
                  id="dropdownMenuButton1" 
                  data-bs-toggle="dropdown" 
                  aria-expanded="false"
                  style="min-height: 46px; border-color: #004600; color: #004600;">
                  <span class="text-truncate">
                    <span id="selected-ministere">
                      {% if selected_ministere %}
                        {{ selected_ministere }}
                      {% else %}
                        Sélectionner un ministère
                      {% endif %}
                    </span>
                  </span>
                </button>
                <ul class="dropdown-menu w-100" id="ministere-dropdown-list" aria-labelledby="dropdownMenuButton1">
                  <!-- Liste des ministères -->
                </ul>
              </div>
            </div>
          </div>
          
          
          <!-- Carte 2 - Responsable -->
          <div class="col-xl-2 col-lg-4 col-md-4 col-sm-6 mb-1">
            <div class="card h-100 mb-0 shadow-sm border-0" style="background-color: #f8f9fa;">
              <div class="card-header p-2" style="background: linear-gradient(135deg, #004600, #007a00); font-weight: 600; color: white; border-top-left-radius: .5rem; border-top-right-radius: .5rem;">
                <div class="d-flex justify-content-between align-items-center">
                  <h6 class="mb-0 fw-bold" style="color: #ffffff">Responsable</h6>
                  <div class="icon icon-sm icon-shape bg-white shadow-sm text-center rounded-circle" style="color: #004600;">
                    <i class="material-symbols-rounded opacity-10">person</i>
                  </div>
                </div>
              </div>
          
              <hr class="my-1 mx-3" style="border-top: 1px solid #004600;">
          
              <div class="card-footer p-2 border-top-0">
                <h1 class="mb-0 fw-bold text-truncate text-center" style="color: #004600;font-size: 1.9rem;" id="responsable_portefeuille">
                </h1>
              </div>
            </div>
          </div>
          
          <!-- Carte 3 - Nbre programme -->
          <div class="col-xl-2 col-lg-4 col-md-4 col-sm-6 mb-1">
            <div class="card h-100 mb-0 shadow-sm border-0" style="background-color: #f8f9fa;">
              <div class="card-header p-2" style="background: linear-gradient(135deg, #004600, #007a00); font-weight: 600; color: white; border-top-left-radius: .5rem; border-top-right-radius: .5rem;">
                <div class="d-flex justify-content-between align-items-center">
                  <h6 class="mb-0 fw-bold" style="color: #ffffff">Nbre programme</h6>
                  <div class="icon icon-sm icon-shape bg-white shadow-sm text-center rounded-circle" style="color: #004600;">
                    <i class="material-symbols-rounded opacity-10">leaderboard</i>
                  </div>
                </div>
              </div>
          
              <hr class="my-1 mx-3" style="border-top: 1px solid #004600;">
          
              <div class="card-footer p-2 border-top-0">
                <h1 class="mb-0 fw-bold text-center" style="color: #004600;font-size: 3rem;" id="nb_programmes">
                </h1>
              </div>
            </div>
          </div>
          
          <!-- Carte 4 - Nbre projet -->
          <div class="col-xl-2 col-lg-4 col-md-4 col-sm-6 mb-1">
            <div class="card h-100 mb-0 shadow-sm border-0" style="background-color: #f8f9fa;">
              <div class="card-header p-2" style="background: linear-gradient(135deg, #004600, #007a00); font-weight: 600; color: white; border-top-left-radius: .5rem; border-top-right-radius: .5rem;">
                <div class="d-flex justify-content-between align-items-center">
                  <h6 class="mb-0 fw-bold" style="color: #ffffff">Nombre de projet</h6>
                  <div class="icon icon-sm icon-shape bg-white shadow-sm text-center rounded-circle" style="color: #004600;">
                    <i class="material-symbols-rounded opacity-10">weekend</i>
                  </div>
                </div>
              </div>
          
              <hr class="my-1 mx-3" style="border-top: 1px solid #004600;">
          
              <div class="card-footer p-2 border-top-0">
                <h1 class="mb-0 fw-bold text-center" style="color: #004600;font-size: 3rem;" id="nb_projets"> </h1>
              </div>
            </div>
          </div>
          
        
          <!-- Carte 5 - Projets démarrés -->
          <div class="col-xl-2 col-lg-4 col-md-4 col-sm-6 mb-1">
            <div class="card h-100 mb-0 shadow-sm border-0" style="background-color: #f8f9fa;">
              <div class="card-header p-2" style="background: linear-gradient(135deg, #004600, #007a00); font-weight: 600; color: white; border-top-left-radius: .5rem; border-top-right-radius: .5rem;">
                <div class="d-flex justify-content-between align-items-center">
                  <h6 class="mb-0 fw-bold" style="color: #ffffff">Projets démarrés</h6>
                  <div class="icon icon-sm icon-shape bg-white shadow-sm text-center rounded-circle" style="color: #004600;">
                    <i class="material-symbols-rounded opacity-10">shopping_cart</i>
                  </div>
                </div>
              </div>
          
              <hr class="my-1 mx-3" style="border-top: 1px solid #004600;">
          
              <div class="card-footer p-2 border-top-0">
                <h1 class="mb-0 fw-bold text-center" style="color: #004600;font-size: 3rem;" id="nb_projets_lances"></h1>
              </div>
            </div>
          </div>

          <!-- Carte 6 - États des projets -->
          <div class="col-xl-2 col-lg-4 col-md-4 col-sm-6 mb-1">
            <div class="card h-100 mb-0 shadow-sm border-0" style="background-color: #f8f9fa;">          
              <div class="card-body p-2">
                <table class="table table-sm table-borderless mb-0 h-100">
                  <tbody>
                    <tr class="align-middle">
                      <td>
                        <div class="d-flex align-items-center">
                          <i class="material-symbols-rounded me-2" style="color: #198754;">check_circle</i>
                          <span class="fw-bold text-dark">Satisfaisant</span>
                        </div>
                      </td>
                      <td class="text-end fw-bold text-dark" id="Satisfaisant"></td>
                    </tr>
                    <tr class="align-middle">
                      <td>
                        <div class="d-flex align-items-center">
                          <i class="material-symbols-rounded me-2" style="color: #ffc107;">warning</i>
                          <span class="fw-bold text-dark">Alerte</span>
                        </div>
                      </td>
                      <td class="text-end fw-bold text-dark" id="Alerte"></td>
                    </tr>
                    <tr class="align-middle">
                      <td>
                        <div class="d-flex align-items-center">
                          <i class="material-symbols-rounded me-2" style="color: #dc3545;">block</i>
                          <span class="fw-bold text-dark">Bloqué</span>
                        </div>
                      </td>
                      <td class="text-end fw-bold text-dark" id="Danger"></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          
        </div>
      </div>

      
      <!-- deuxieme ligne -->
      <div class="container-fluid py-4">
        <div class="row mb-4">
          <div class="col-12">
            <div class="card border-0 shadow-sm">
              <div class="card-body p-4">
                <div class="row align-items-center">
                  <!-- Titre avec icône -->
                  <div class="col-md-3 mb-3 mb-md-0">
                    <div class="d-flex align-items-center">
                      <div class="icon-shape rounded-circle shadow-sm text-center me-3" 
                           style="width: 48px; height: 48px; line-height: 48px; background-color: #004600;">
                        <i class="material-symbols-rounded text-white fs-4">route</i>
                      </div>
                      <h5 class="mb-0 fw-bold text-dark">Axe :</h5>
                    </div>
                  </div>
        
                  <!-- Contenu des axes -->
                  <div class="col-md-9">
                    <div class="card border-0" style="background-color: #f2fdf4;">
                      <div class="card-body p-3">
                        <p class="mb-0">
                          <span class="fw-bold text-dark" id="nom_axe">
                          </span>
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="row g-4">
          <!-- Carte 1 - Programme -->
          <div class="col-xl-3 col-md-6 h-100">
            <div class="card border-0 shadow-sm h-100">
              <div class="card-body p-0 d-flex flex-column">
                <!-- Titre -->
                <div class="px-3 pt-3 pb-2 d-flex align-items-center justify-content-between">
                  <p class="text-sm text-muted mb-0">Programme</p>
                  <div class="icon icon-sm rounded-circle text-center shadow-sm" 
                       style="background-color: #004600; width: 32px; height: 32px;">
                    <i class="material-symbols-rounded text-white fs-6" style="line-height: 32px;">list</i>
                  </div>
                </div>
          
                <!-- Dropdown -->
                <div class="dropdown flex-grow-1 d-flex flex-column px-3 pb-3">
                  <button class="btn border border-success text-dark dropdown-toggle flex-grow-1 d-flex align-items-center justify-content-between"
                          type="button"
                          id="programmeDropdown"
                          data-bs-toggle="dropdown"
                          aria-expanded="false"
                          style="min-height: 46px; background-color: #f2fdf4;">
                    <span class="text-truncate" id="selected-programme">
                      {% if selected_programme %}{{ selected_programme.nom }}{% else %}Sélectionner un programme{% endif %}
                    </span>
                  </button>
                  <ul class="dropdown-menu w-100" aria-labelledby="programmeDropdown" id="liste_programmes">
                  </ul>
                </div>
              </div>
            </div>
          </div>
          
          
          <!-- Carte 2 - Projet -->
          <div class="col-xl-3 col-md-6 h-100">
            <div class="card border-0 shadow-sm h-100">
              <div class="card-body p-0 d-flex flex-column">
                <!-- Titre -->
                <div class="px-3 pt-3 pb-2 d-flex align-items-center justify-content-between">
                  <p class="text-sm text-muted mb-0">Projet</p>
                  <div class="icon icon-sm rounded-circle text-center shadow-sm" 
                       style="background-color: #004600; width: 32px; height: 32px;">
                    <i class="material-symbols-rounded text-white fs-6" style="line-height: 32px;">assignment</i>
                  </div>
                </div>
          
                <!-- Dropdown -->
                <div class="dropdown flex-grow-1 d-flex flex-column px-3 pb-3">
                  <button class="btn border border-success text-dark dropdown-toggle flex-grow-1 d-flex align-items-center justify-content-between"
                          type="button"
                          id="projetDropdown"
                          data-bs-toggle="dropdown"
                          aria-expanded="false"
                          style="min-height: 46px; background-color: #f2fdf4;">
                    <span class="text-truncate" id="selected-projet">
                      {% if selected_projet %}{{ selected_projet }}{% else %}Sélectionner un Projet{% endif %}
                    </span>
                  </button>
                  <ul class="dropdown-menu w-100" aria-labelledby="projetDropdown" id="liste_projets">
                  </ul>
                </div>
              </div>
            </div>
          </div>
          
          
          <!-- Carte 3 - Ministère Responsable -->
          <div class="col-xl-3 col-md-6 h-100">
            <div class="card border-0 shadow-sm h-100">
              <div class="card-body d-flex flex-column p-0">
                
                <!-- Titre Ministère -->
                <div class="px-3 pt-3 pb-2 text-center">
                  <small class="text-muted text-uppercase">Ministère Responsable</small>
                </div>
                
                <hr class="my-0 mx-4 opacity-25">
          
                <!-- Logo Ministère -->
                <div class="d-flex flex-column align-items-center justify-content-center flex-grow-1 py-3">
                  <div class="rounded-circle bg-light d-flex align-items-center justify-content-center shadow-sm" style="width: 90px; height: 90px;">
                    <img id="logoResponsable" 
                         src="{% static 'assets/img/ministere_responsable.png' %}" 
                         class="img-fluid" 
                         style="max-width: 70%; max-height: 70%;" 
                         alt="Logo Ministère">
                  </div>
                </div>
          
              </div>
            </div>
          </div>
          
        
        
          <!-- Carte 4 - Chef de Projet -->
          <div class="col-xl-3 col-md-6 h-100">
            <div class="card border-0 shadow-sm h-100">
              <div class="card-body p-0 d-flex flex-column">
                <hr class="my-0 mx-3 opacity-25">
                <div class="table-responsive flex-grow-1">
                  <table class="table table-borderless table-hover mb-0">
                    <thead>
                      <tr>
                        <th class="ps-3 ">Chef de Projet</th>
                      </tr>
                    </thead>
                    <tbody>
                      <!-- Chef de Projet Nom -->
                      <tr>
                        <td class="ps-3 py-2">
                          <div class="d-flex align-items-center">
                            <div class=" bg-opacity-10 d-flex align-items-center justify-content-center me-2" style="width: 24px; height: 24px;">
                              <i class="material-symbols-outlined text-success">person</i>
                            </div>
                            <div>
                              <span class="fw-bold d-block" id="nom_chef_projet">
                              </span>
                            </div>
                          </div>
                        </td>
                      </tr>
          
                      <!-- Email du Chef de Projet -->
                      <tr>
                        <td class="ps-3 py-2">
                          <div class="d-flex align-items-center">
                            <div class=" bg-opacity-10 d-flex align-items-center justify-content-center me-2" style="width: 24px; height: 24px;">
                              <i class="fas fa-envelope text-warning fs-6"></i>
                            </div>
                            <div>
                              <span class="fw-bold d-block" id="email_chef_projet">
                              </span>
                            </div>
                          </div>
                        </td>
                      </tr>
          
                      <!-- Téléphone du Chef de Projet -->
                      <tr>
                        <td class="ps-3 py-2">
                          <div class="d-flex align-items-center">
                            <div class=" bg-opacity-10 d-flex align-items-center justify-content-center me-2" style="width: 24px; height: 24px;">
                              <i class="fas fa-phone text-warning fs-6"></i>
                            </div>
                            <div>
                              <span class="fw-bold d-block" id="tel_chef_projet">
                              </span>
                            </div>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
          
        </div>
        
        <br>
        <div class="row g-4">
          <!-- Carte 1 -->
          <div class="col" style="min-width: 200px; flex: 1 1 0">
            <div class="card h-100 mb-0 shadow-sm border-0" style="background-color: #f8f9fa;">
              <div class="card-header p-2" style="background: linear-gradient(135deg, #004600, #007a00); font-weight: 600; color: white; border-top-left-radius: .5rem; border-top-right-radius: .5rem;">
                <div class="d-flex justify-content-between align-items-center">
                  <h6 class="mb-0 fw-bold" style="color: #ffffff">Nombre de Composantes</h6>
                  <div class="icon icon-sm icon-shape bg-white shadow-sm text-center rounded-circle" style="color: #004600;">
                    <i class="material-symbols-rounded opacity-10">data_usage</i>
                  </div>
                </div>
              </div>

              <hr class="my-1 mx-3" style="border-top: 1px solid #004600;">

              <div class="card-body p-0 d-flex flex-column">
                <div class="px-4 pt-3 pb-1">
                  <div class="d-flex justify-content-center align-items-center mb-3" style="height: 100px;"> <!-- Ajout d'une hauteur fixe et centrage -->
                    <div> 
                      <h1 class="fw-bold mb-0 text-center" style="color: #004600; font-size: 5rem;" id="nb_composantes">
                        <!-- La valeur sera insérée ici par JavaScript -->
                      </h1>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Carte 2 -->
          <div class="col" style="min-width: 200px; flex: 1 1 0">
            <div class="card border-0 shadow-sm h-100">
              <div class="card-body p-0 d-flex flex-column">
                <div class="px-3 pt-3 pb-1">
                  <div class="d-flex justify-content-between align-items-center">
                    <div>
                      <h6 class="fw-bold mb-0" style="color: #004600;">Composantes ouvertes</h6>
                    </div>
                  </div>
                </div>
                <div class="px-3 pb-2 flex-grow-1" style="position: relative; height: 150px; overflow: hidden;" id="gauge_composantes_ouvertes">
                </div>
              </div>
            </div>
          </div>
          <!-- Carte 3 -->
          <div class="col" style="min-width: 200px; flex: 1 1 0">
            <div class="card border-0 shadow-sm h-100">
              <div class="card-body p-0 d-flex flex-column">
                <div class="px-3 pt-3 pb-1">
                  <div class="d-flex justify-content-between align-items-center">
                    <div>
                      <h6 class="fw-bold mb-0" style="color: #004600;">Composantes bloquées</h6>
                    </div>
                  </div>
                </div>
                <div class="px-3 pb-2 flex-grow-1" style="position: relative; height: 150px; overflow: hidden;" id="gauge_composantes_bloquees">
                </div>
              </div>
            </div>
          </div>
          <!-- Carte 4 -->
          <div class="col" style="min-width: 200px; flex: 1 1 0">
            <div class="card border-0 shadow-sm h-100">
              <div class="card-body p-0 d-flex flex-column">
                <div class="px-3 pt-3 pb-1">
                  <div class="d-flex justify-content-between align-items-center">
                    <div>
                      <h6 class="fw-bold mb-0" style="color: #004600;">Comp. dépriorisées</h6>
                    </div>
                  </div>
                </div>
                <div class="px-3 pb-2 flex-grow-1" style="position: relative; height: 150px; overflow: hidden;" id="gauge_composantes_depriorisees">
                </div>
              </div>
            </div>
          </div>
          <!-- Carte 5 -->
          <div class="col" style="min-width: 200px; flex: 1 1 0">
            <div class="card h-100 mb-0 shadow-sm border-0" style="background-color: #f8f9fa;">
              <div class="card-header p-2" style="background: linear-gradient(135deg, #004600, #007a00); font-weight: 600; color: white; border-top-left-radius: .5rem; border-top-right-radius: .5rem;">
                <div class="d-flex justify-content-between align-items-center">
                  <h6 class="mb-0 fw-bold" style="color: #ffffff">Composantes terminées</h6>
                  <div class="icon icon-sm icon-shape bg-white shadow-sm text-center rounded-circle" style="color: #004600;">
                    <i class="material-symbols-rounded opacity-10">data_usage</i>
                  </div>
                </div>
              </div>
          
              <hr class="my-1 mx-3" style="border-top: 1px solid #004600;">
          
              <div class="card-body p-0 d-flex flex-column">
                <div class="px-4 pt-3 pb-1">
                  <div class="d-flex justify-content-center align-items-center mb-3">
                    <div>
                      <h1 class="fw-bold mb-0 text-center" style="color: #004600; font-size: 5rem;" id="nb_composantes_terminees">
                      </h1>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Liste composante (a gauche) -->
      <!--
      <div class="row">
        
        <style>
          .d-flex-container {
            display: flex;
            height: 350px; /* Vous pouvez ajuster cette hauteur selon vos besoins */
          }
          
          .flex-card {
            flex: 1;
            display: flex;
            flex-direction: column;
          }
          
          .flex-card .card-body {
            flex: 1;
            overflow-y: auto; /* Ajoute un défilement si le contenu dépasse la hauteur */
          }
        </style> 
          <div class="d-flex-container">
            <div class="card flex-card">
              <div class="card-body">
                <div class="dropdown">
                  <button class="btn btn-outline-success dropdown-toggle w-100 d-flex align-items-center justify-content-between"
                          type="button" 
                          id="composanteDropdown" 
                          data-bs-toggle="dropdown" 
                          aria-expanded="false"
                          style="min-height: 46px; border-color: #004600; color: #004600;">
                    <span class="text-truncate">
                      <span id="selected-composante">
                       {% if selected_composante %}{{ selected_composante.nom }}{% else %}Sélectionner un programme{% endif %}
                      </span>
                    </span>
                  </button>
                  <ul class="dropdown-menu w-100" id="dropdown-composantes" aria-labelledby="composanteDropdown">
                  </ul>
                </div>
              </div>
            </div>
          </div>
      </div>-->

      <!-- troisieme ligne -->
      
      <div class="row">
        <!-- Première carte (détails composante) -->
        <div class="col-lg-8 col-md-6 mt-4 mb-4"> 
          <div class="card">
            <div class="card-body">
              <!-- Votre contenu existant pour la première carte -->
              <style>
                .label-title {
                  color: #004600;
                  font-weight: bold;
                }
                .value-card {
                  background-color: #f1f5f1;
                  border-left: 4px solid #004600;
                  border-radius: 0.5rem;
                }
                .value-text {
                  color: #004600;
                  font-weight: bold;
                  font-size: 1rem;
                }
                .action-btn {
                  background-color: #004600;
                  color: white;
                  border: none;
                  border-radius: 0.375rem;
                  padding: 0.5rem 1rem;
                  font-size: 0.875rem;
                  transition: all 0.2s;
                  white-space: nowrap;
                  height: fit-content;
                }
                .action-btn:hover {
                  background-color: #007a00;
                }
              </style>
              <div class="row">
                <!-- Colonne de gauche (Composante + Statut) -->
                <div class="col-md-8">
                  <!-- Composante -->
                  <div class="row align-items-center mb-3">
                    <div class="col-md-4">
                      <h6 class="mb-0 label-title">
                        <i class="bi bi-diagram-3-fill me-2"></i>Composante
                      </h6>
                    </div>
                    <div class="col-md-8">
                      <div class="card value-card border-0">
                        <div class="card-body p-2">
                          <div class="dropdown">
                            <button class="btn dropdown-toggle w-100 d-flex align-items-center justify-content-between py-2"
                                    type="button"
                                    id="composanteDropdown"
                                    data-bs-toggle="dropdown"
                                    aria-expanded="false"
                                    style="background-color: #f8f9fa; color: #004600; border: 1px solid #e9ecef; border-radius: 0.375rem;">
                              <span class="text-truncate">
                                <span id="selected-composante">
                                  {% if selected_composante %}{{ selected_composante.nom }}{% else %}Sélectionner une composante{% endif %}
                                </span>
                              </span>
                              <i class=" ms-2" style="color: #004600; font-size: 0.8rem;"></i>
                            </button>
                            <ul class="dropdown-menu w-100 mt-1 border-0 shadow-sm rounded-3 overflow-hidden"
                                id="dropdown-composantes"
                                aria-labelledby="composanteDropdown">
                              <!-- Les éléments de la liste seront ajoutés ici dynamiquement -->
                            </ul>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <!-- Statut -->
                  <div class="row align-items-center">
                    <div class="col-md-4">
                      <h6 class="mb-0 label-title">
                        <i class="bi bi-check-circle-fill me-2"></i>Statut
                      </h6>
                    </div>
                    <div class="col-md-8">
                      <div class="card value-card border-0">
                        <div class="card-body p-2">
                          <span class="value-text" id="statut_composante"></span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Colonne de droite (Bouton centré) -->
                <div class="col-md-4 d-flex align-items-center justify-content-center h-100">
                  <button class="action-btn" id="actionBtn">
                    <i class="bi bi-chat-square-text me-1"></i> Message de la semaine
                  </button>
                </div>
              </div>

              <!-- Modal pour afficher les messages -->
              <div class="modal fade" id="messageModal" tabindex="-1" aria-labelledby="messageModalLabel" aria-hidden="true">
                  <div class="modal-dialog modal-lg modal-dialog-centered">
                      <div class="modal-content shadow-lg">
                          <!-- En-tête avec fond coloré -->
                          <div class="modal-header bg-primary text-white" style="background: linear-gradient(135deg, #004600, #007a00);">
                              <h5 class="modal-title fs-4 fw-bold text-white" id="messageModalLabel">
                                  <i class="bi bi-chat-square-text me-2"></i>Messages de la semaine
                              </h5>
                              <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                          </div>
                          
                          <!-- Corps de la modal avec animation de chargement améliorée -->
                          <div class="modal-body p-4" id="contenu_message">
                              <div class="text-center py-5 my-3">
                                  <div class="spinner-grow text-primary" style="width: 3rem; height: 3rem;" role="status">
                                      <span class="visually-hidden">Chargement...</span>
                                  </div>
                                  <h5 class="mt-4 text-muted">Chargement des messages...</h5>
                                  <p class="text-muted small mt-2">Veuillez patienter un instant</p>
                              </div>
                          </div>
                          
                          <!-- Pied de page avec bouton stylisé -->
                          <div class="modal-footer bg-light">
                              <button type="button" class="btn btn-outline-primary rounded-pill px-4" data-bs-dismiss="modal" style="border-color: #004600; background-image: linear-gradient(135deg, #004600, #007a00); color: white;">
                                  <i class="bi bi-x-lg me-1"></i> Fermer
                              </button>
                          </div>
                      </div>
                  </div>
              </div>
              <hr class="dark horizontal">
              <!-- detail composante -->
              <!-- Carte 3 - Ministère Responsable -->
              <div class="row g-3">
                <div class="col-xl-3 col-md-6 h-100">
                  <!-- Carte 3 - Ministère Mise en oeuvre -->
                  <style>
                    .card-custom {
                      border: 1px solid #004600;
                      background-color: #f8fdf8;
                      color: #004600;
                    }
                  
                    .card-custom .card-title {
                      font-weight: 600;
                      color: #004600;
                    }
                  
                    .card-custom .card-header {
                      background-color: linear-gradient(135deg, #004600, #007a00); font-weight: 600;
                      color: white;
                      font-size: 0.875rem;
                      padding: 0.75rem 1rem;
                    }
                  
                    .card-custom hr {
                      border-top: 1px solid #004600;
                      opacity: 0.2;
                    }
                  
                    .circle-box {
                      width: 80px;
                      height: 80px;
                      border: 2px solid #004600;
                      border-radius: 50%;
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      color: #004600;
                      font-weight: bold;
                    }
                  </style>
                  
                  <!-- Carte Mise en oeuvre -->
                  <div class="card card-custom shadow-sm" style="height: 150px; border: none;">
                    <div class="card-header border-0 py-3 text-white" 
                        style="border-top-left-radius: 12px; border-top-right-radius: 12px;
                                background: linear-gradient(135deg, #004600, #007a00); font-weight: 600;">Mise en oeuvre</div>
                    <div class="card-body d-flex flex-column p-0">
                      <div class="d-flex flex-column align-items-center justify-content-center h-100 p-2">
                        <img id="logoMise" 
                            src="{% static '/assets/img/ministere_mise_en_oeuvre.png' %}"
                            class="img-contain" 
                            style="max-height: 80px; max-width: 100%; object-fit: contain;"
                            alt="Logo principal">
                      </div>
                    </div>
                  </div>
                  <br>
                  
                  <!-- Carte Date début -->
                  
                  <div class="card card-custom border-0 shadow-sm h-100" style="border-radius: 12px;">
                    <div class="card-header border-0 py-3 text-white" 
                        style="border-top-left-radius: 12px; border-top-right-radius: 12px;
                                background: linear-gradient(135deg, #004600, #007a00); font-weight: 600;">
                      Date début
                    </div>
                    <div class="card-body d-flex flex-column p-0 bg-light">
                      <div class="px-3 py-4 d-flex flex-column align-items-center justify-content-center flex-grow-1">
                        <h5 class="card-title mb-0 text-dark" id="date_lancement">
                          <!-- Content will be inserted here dynamically -->
                        </h5>
                      </div>
                    </div>
                  </div>
                  <br>
                  
                  <!-- Carte Financement -->
                  <div class="card card-custom border-0 shadow-sm h-100" style="border-radius: 12px;">
                    <div class="card-header border-0 py-3 text-white" 
                        style="border-top-left-radius: 12px; border-top-right-radius: 12px;
                                background: linear-gradient(135deg, #004600, #007a00); font-weight: 600;">
                      Financement
                    </div>
                    <div class="card-body d-flex flex-column p-0 bg-light">
                      <div class="px-3 py-4 d-flex flex-column align-items-center justify-content-center flex-grow-1">
                        <h5 class="card-title mb-0 text-dark" id="financement">
                          <!-- Content will be inserted here dynamically -->
                        </h5>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-xl-3 col-md-6 h-100">
                  <!-- Agence d'exécution -->
                  <div class="card card-custom shadow-sm" style="height: 150px;border-radius: 12px;border: none;">
                    <div class="card-header border-0 py-3 text-white" 
                        style="border-top-left-radius: 12px; border-top-right-radius: 12px;
                                background: linear-gradient(135deg, #004600, #007a00); font-weight: 600;">Agence d'exécution</div>
                    <div class="card-body d-flex flex-column p-0 bg-light">
                      <div class="d-flex flex-column align-items-center justify-content-center h-100 p-2">
                        <img id="logoAgence" 
                            src="{% static '/assets/img/agence_execution.png' %}" 
                            class="img-contain" 
                            style="max-height: 80px; max-width: 100%; object-fit: contain;"
                            alt="Logo principal">
                      </div>
                    </div>
                  </div>
                  <br>

                  <!-- Fin prévisionnelle -->            
                  <div class="card card-custom border-0 shadow-sm h-100" style="border-radius: 12px;">
                    <div class="card-header border-0 py-3 text-white" 
                        style="border-top-left-radius: 12px; border-top-right-radius: 12px;
                                background: linear-gradient(135deg, #004600, #007a00); font-weight: 600;">
                      Fin prévisionnelle
                    </div>
                    <div class="card-body d-flex flex-column p-0 bg-light">
                      <div class="px-3 py-4 d-flex flex-column align-items-center justify-content-center flex-grow-1">
                        <h5 class="card-title mb-0 text-dark ">
                          {% if selected_composante %}
                            15 Jan 2023
                          {% else %}
                            15 Jan 2023
                          {% endif %}
                        </h5>
                      </div>
                    </div>
                  </div>
                  <br>

                  <!-- Partenaire -->
                  
                  <div class="card card-custom border-0 shadow-sm h-100" style="border-radius: 12px;">
                    <div class="card-header border-0 py-3 text-white" 
                        style="border-top-left-radius: 12px; border-top-right-radius: 12px;
                                background: linear-gradient(135deg, #004600, #007a00); font-weight: 600;">
                      Partenaire
                    </div>
                    <div class="card-body d-flex flex-column p-0 bg-light">
                      <div class="px-3 py-4 d-flex flex-column align-items-center justify-content-center flex-grow-1">
                        <h5 class="card-title mb-0 text-dark" id="partenaire_pad">
                          <!-- Content will be inserted here dynamically -->
                        </h5>
                      </div>
                    </div>
                  </div>
                </div>
                <style>
                  .card-custom {
                    border: 1px solid #004600;
                    background-color: #f8fdf8;
                    max-height: 400px;
                    color: #004600;
                  }
                
                  .card-custom .card-header {
                    background-color: #004600;
                    color: white;
                    font-size: 0.875rem;
                    font-weight: 500;
                    padding: 0.75rem 1rem;
                  }
                
                  .custom-alert {
                    border-left: 4px solid #004600;
                    background-color: #e9f6e9;
                    color: #004600;
                    font-size: 0.95rem;
                  }
                </style>
                
                <div class="col-xl-6 col-md-6 h-50 border-0 shadow-sm"  style="border-radius: 12px;border: none;">
                  <div class="card card-custom shadow-sm h-50"  style="border-radius: 12px;border: none;">
                    <div class="card-header border-0 py-3 text-white" id="localisation" style="background: linear-gradient(135deg, #004600, #007a00); font-weight: 600;border: none;"> Zone intervention :</div>
                    <div class="card-body d-flex flex-column p-0 bg-light">
                      <div class="px-3 py-3 d-flex flex-column align-items-center justify-content-center flex-grow-1">
                        <div id="carte-container">
                          
                        <!-- SVG Map -->
                        <?xml version="1.0" encoding="UTF-8"?>
                        <svg id="map" viewBox="0 0 1000 700" width="100%" height="300">
                          <style>
                            path {
                              fill: #cccccc;
                              stroke: #ffffff;
                              stroke-width: 1.5px;
                              transition: fill 0.3s ease;
                            }
                            path:hover {
                              fill: #8fbf8f;
                              cursor: pointer;
                            }
                            text {
                              font-family: Arial, sans-serif;
                              font-size: 12px;
                              text-anchor: middle;
                              pointer-events: none;
                            }
                          </style>
                          <g >
                            <path d="M877.5 539.4l0.3 1.6 1.3 0.4 3.9 1.9 1.2 0.9 0.5 1.1 0.9 2.9 0.7 1.1 1.3 1-0.1 0.2 0.4 0.5 0.5 0.2 1.3-0.2 1.2-0.2 0.8-0.1 0.6 0 0.4-0.2 0.2-0.6 0.2-1 0.5-0.9 0.4-0.7 0.7-0.4 0.8-0.1 0.2 0 0.8-0.1 0.8-0.9 0.2-0.7 0.3-1.3 0-0.5 0.6-1 0.4-0.7 0.8-0.9 0.6-0.9 0.6-0.7-0.1-0.8-0.1-0.5-0.2-0.6 0.1-1.1 0.3-0.4 0.1-0.1 0.2-0.1 1.9 0.3 1.1 1.2 0.8 1.5 1.5 1.1 1.4 0.2 2.9-0.6 3.7-0.1 0.7 0.6-0.2 2.2 0.4 1.5 1.6 0.2 1.8-0.5 0.1 0 0.1 0 0.9-0.1 0 2.9 1.1 2.9 3.6 5.1 3.4 3 0.6 1.5-0.2 1.6-1.9 2.8-0.6 1.6 0.5 2.7 1.4 1.9 1.7 1.6 1.4 2 0.1 5.3 0.7 2.5 2.6 0.6 2.1 1.2 1.7 1.3 1.9 1.2 2.4 0.6 1.5 0.6-0.1 1.1-0.8 1.1-0.3 0.9 2 3 0.8 1.8 0.6 1 0.6 0.5 1.3 0.6-0.3 0.6-0.8 0.7-0.5 0.6 0 1.3-0.3 2.9-0.4 1.5 2.3 0.5 1.7-0.7 1-1.8 0.3 0.1 0.6 0.2 0.3 0.4 0.3 0.3 0.4 0.4 0.3 0.1 0.1 0 0.2-0.2 0.1 0.7 0.4 3.9-0.5 0.9-1 0.6-0.1-0.2-0.2-0.2-0.3 0.2-0.3 0.4-0.2 0.7-0.2 0.2-0.6 0-0.9-0.5-1.1-0.4-1 0.5-0.1 1 0.8 0.8 0.8 0.8 0.3 0.8-0.6 1.5-0.8 1.6-0.6 1.5 0.5 2.5-0.2 0.6-0.5 0.7-0.3 0.8 0 0.9 0.6 0.4 0.7 0.1 0.4 0.1 0.2 0.2 0.5 0.7 0.6 1 0.5 1.3 0.3 1.6 0.2 1.8-0.4 1.6-1 1.1 0 0.7 1.6 2.8 0.2 1.4-0.7 1.3-1 0.1-0.4 0-0.7 0.1-0.4 0.4 0 0.5-2 0.6-1.5 4-1.2 0.8-0.9 1.1 0.2 2.2 0.5 0.4 1.1 0.4 1.2 0.8 0.7 1.6 0.1 1.6-0.8 4.7 0.1 1.6 0.4 1.1 0.1 1.1-0.3 1.4-0.1 0-0.2 0.4-2.8 1.3-1 1 1.6 0.6 1.1 0.7 1.7 3 1.2 1-0.1-1.1 0.5-1 0.5 0.1 0.9 0.3 0.1-0.1 0.3-0.1 0-0.4 0.6 1.6 0.3 1.2 0.9 2.5 0.3 1.4 1.2-1.9 0.3-0.8 1.8 2.6-0.3 3.5-1 4-0.2 4-4.1-0.2-9.7-3.5-5-0.5-12.7 1-6.1 1.1-11.4 4.3-5.6 0.9-12-0.5-3.1-0.7-8.9-3.7-0.2-0.3-0.3-0.1-1 0-0.6 0.2-1.7 1.2-5.6 3.1-2 0.4-3.1-0.4-8.9-2.9-3.7 0.1-2.6 1.3-4.9 4.5-5.5 3-24.9 6.6-2.4-1.3-4.2-6.4-2.6-1.9-6.4-2.4-3.1-0.7-2.6-0.1-2.5 0.5-2.8 1.1-4.3 2.4-1.2 0.3-0.1 0.1-2.1-0.1-0.6-0.6-0.1-1-0.8-1.5-4.1-4.6-2.5-2-2.8-1.2-3.1-0.3-9.5 0.5-3.1-0.4-0.8-1.2-0.7-1.5-2.3-1.2-4.4-0.3-1.4-0.5-1.6-1.5-0.3-1.3 0.3-1 0-0.6-3.6-3.2-5.8-3-5.4 0-2.4 6.1-0.5 2.9-1.7 1.5-2.4 0.1-2.7-1-2.8 0.3-2.6-0.2-2.2-1.2-1.7-2.5-0.6-2.9 0.5-2.5 2.2-5.1 0.6-2.6 0.1-3.1-0.6-2.8-1.9-2.1-2.3-0.3-2.5 0.4-2.7 0.1-2.7-1.4-1.4 1.7-1.1-0.8-1-0.1-1.1 0.1-1.3 0-1.8 0.6-0.6 0.1-0.7-0.3-1.4-1.6-0.8-0.4-1.1 0.1-2.5 0.7-1.3 0.2-1.3-0.2-1.8-1.2-1.3-0.3-1.3 0.1-4.4 0.9-0.7 0.3-0.3 0.4-0.5 0.4-0.8 0-0.7-0.2-1.3-1-0.7-0.2-0.4-0.2 0.4-2.3-1.2-3-1.9-0.9-0.9 0.2-0.7 0.3-1.1 0.5-1.6 0.3-3.4 0-1.9-0.3-1.6-0.6-1.9-1-1.1-0.8-1-1.3-0.3-0.9 0.2-0.8 0.7-1.3 0.3-0.8 0.3-5.6-0.2-0.9-0.4-0.9-0.4-1.4-1-1.1-0.3-1-0.1-0.9 0.2-0.8 0.3-0.7 0.9-1.3 0.3-0.7 0.1-0.8-0.5-0.7-0.7-0.5-0.1-0.5 0.6-0.1 0.7 0 0.9 0 0.6-0.3 0.2-1-0.6-1.1-0.6-3.6-0.6-0.6-2-1.4-1.4-1.5-0.5-1.3-0.5-2.4-0.7-1-0.3-0.8 0.2-0.7 0.5-0.6 0.3-0.8-0.7-4.7-0.2-0.6-0.7-0.3-0.9-0.2-1-0.5-0.3-0.6 0.2-0.6 0.4-0.7 0.3-0.9-0.4-0.6-1-1.1-1.1-1.4-1.6-1.7-2.3-1.4-0.3-0.8 0-0.9 0.1-0.9-0.1-1-0.5-0.6-0.8-0.4-0.8-0.7-2-2.2-1-2.3-0.3-1.3-0.1-2.5-0.7-1.2 0-1 0-0.8 0.3-0.9-0.1-2.4 0.2-1.1-0.2-3.3-0.3-1-0.5-0.7-0.7-0.4 0-1.4 3.4-1.6 0.1-8.1 2.5-1.8-0.5 2.6 0.9 1.1 1.7 0.5 1.5-0.3 0.8-1.8 0.8-0.9 2.2-1.1 2.9-0.8 1.9 0.6-1 3.3 1.9-0.8 1.2-3.6 1.4-0.8 6 0 5.7 1.1 1.9-0.8 1.5-0.9 1.3 0.2 1.4 2.4-1.5 2.5-1.1 1.3-0.7 1.3 0.1 2.3 0.6 1.2 0.4 1.1 0.1 1.3 0.5 0.6 1.1-0.1 0.9 0 0.5 0.5 0.4 0.9 1 0.7 1 0.5 0.7 0.5 0.1 0.8-0.6 1.4 0.9 1.5 0.6 2-0.6 2.1-0.3 2 1.9 1.6-6 2.2 0 0.9 3 1.4 0.6 3.7-0.3 4.6 0.7 3.9 2.8 3.3 2.9 0.7 6.5-1.9 4.2-1.6 2.2 0 4.3 0.5 3.9 1.3 2.6 2.2 2.6 0 1.3-2.2 1.3-1.3 3 0 3.5-1.8 2.6-1.3 8.2 0 3.1 1.3 2.6 2.7 2.1 0 3.5 3.5 3.9 2.7 3 0.9 1.3-2.2 0-1.8 1.3-1.3 2.6 0 2.2-0.9 0.4-2.7 1.3-1.3 3 0.4 2.2 0.9 2.2-0.4 0-2.7 1.3-2.7 3.4-2.2 2.2-2.7-0.9-3.5 0-3.6 2.2-1.8 3-0.4 3.1 0 2.6-1.4 1.7-1.3 2.2 1.3 2.1 1.4 3.5 0.4 4.8-1.3 2.6-1.8 1.7-3.1 0.4-3.1 1.8-2.2 3-0.5 0.9-2.2 2.1-1.8 3.9-0.9 3.5 0.9 2.2 2.7 1.7 1.3 1.7-0.4 0.9-2.7 1.3-1.8 0.9-3.5 1.7-0.9 4.8 0.9 3.9 0 2.1-2.7-0.8-3.6-4.4-5.3-0.8-2.7 2.1-2.2 0-3.6 3.5-1.3 4.3 2.6 3.9 3.2 4.4 2.2 4.3 2.7 5.2 1.3 3.9 1.3 0.9 3.2 0.8 3.5 3.1 0 3.9-2.7 3.9-4.4 5.2-1.3 8.6-1.6z" id="SNKE" data-region="Kédougou">
                            </path>
                            <path d="M877.5 539.4l-8.6 1.6-5.2 1.3-3.9 4.4-3.9 2.7-3.1 0-0.8-3.5-0.9-3.2-3.9-1.3-5.2-1.3-4.3-2.7-4.4-2.2-3.9-3.2-4.3-2.6-3.5 1.3 0 3.6-2.1 2.2 0.8 2.7 4.4 5.3 0.8 3.6-2.1 2.7-3.9 0-4.8-0.9-1.7 0.9-0.9 3.5-1.3 1.8-0.9 2.7-1.7 0.4-1.7-1.3-2.2-2.7-3.5-0.9-3.9 0.9-2.1 1.8-0.9 2.2-3 0.5-1.8 2.2-0.4 3.1-1.7 3.1-2.6 1.8-4.8 1.3-3.5-0.4-2.1-1.4-2.2-1.3-1.7 1.3-2.6 1.4-3.1 0-3 0.4-2.2 1.8 0 3.6 0.9 3.5-2.2 2.7-3.4 2.2-1.3 2.7 0 2.7-2.2 0.4-2.2-0.9-3-0.4-1.3 1.3-0.4 2.7-2.2 0.9-2.6 0-1.3 1.3 0 1.8-1.3 2.2-3-0.9-3.9-2.7-3.5-3.5-2.1 0-2.6-2.7-3.1-1.3-8.2 0-2.6 1.3-3.5 1.8-3 0-1.3 1.3-1.3 2.2-2.6 0-2.6-2.2-3.9-1.3-4.3-0.5-2.2 0-4.2 1.6-6.5 1.9-2.9-0.7-2.8-3.3-0.7-3.9 0.3-4.6-0.6-3.7-3-1.4 0-0.9 6-2.2-1.9-1.6 0.3-2 0.6-2.1-0.6-2-0.9-1.5 0.6-1.4-0.1-0.8-0.7-0.5-1-0.5-1-0.7-0.4-0.9-0.5-0.5-0.9 0-1.1 0.1-0.5-0.6-0.1-1.3-0.4-1.1-0.6-1.2-0.1-2.3 0.7-1.3 1.1-1.3 1.5-2.5-1.4-2.4-1.3-0.2-1.5 0.9-1.9 0.8-5.7-1.1-6 0-1.4 0.8-1.2 3.6-1.9 0.8 1-3.3-1.9-0.6-2.9 0.8-2.2 1.1-0.8 0.9-0.8 1.8-1.5 0.3-1.7-0.5-0.9-1.1 0.5-2.6-2.5 1.8-0.1 8.1-3.4 1.6 0 1.4-1.8 0-0.9-0.2-1.1-0.8-0.4-0.9-0.3-1.1-0.2-1.3-0.4-0.8-0.7-0.4-2.1-0.8-1.5-1-0.5-0.9-0.2-0.9 0.4-1.6 0.2-1-0.1-1.1-0.5-0.8-0.8-0.4-0.8-0.6-0.3-0.7 0.1-0.6 1.3-1.9 0.4-0.7 0-1-0.5-0.5-0.8-0.3-1.9 0.1-3.6 0.7-1 0.1-0.9-0.1-1-0.1-0.9-0.3-0.9-0.5-0.3-0.7 0.2-0.7 0.4-0.6 0.4-0.5 0.4-0.6 0.4-0.7 0.2-0.8 0.1-1-0.1-0.9 0.1-0.8 0.1-0.8 0.4-0.7 0.3-0.7 2.7-2.6 0.5-0.6 0.3-0.8-0.2-0.4-0.4-0.3-1.6-0.4-2.2-0.9-0.8-0.1-0.9-0.1-0.8 0.2-0.8 0.3-1.3 0.8-0.7 0.2-0.9-0.1-1-0.8-0.4-0.9 0-0.9 0.3-0.7 0.4-0.6 0.6-0.8 0.1-0.2 0-0.5 0-1.5 0.6-1.5 0.1-0.9-0.4-0.6-0.7-0.2-1.6 0-1.6-0.2-0.7 0.2-0.6 0.4-0.4 0.6-0.2 0.8-0.3 0.7-0.6 0.5-0.8 0.2-1.6 0.2-1.4 0.5-1.9 0.9-0.3-0.3-0.8-1.2-0.9-2.9-0.8-1.3-2.5-2.1-3.5-1.8-3.8-1.3-3.1-0.5-1.9 0.3-3 1.8-1.8 0.7-1.5 0.3-2.6-0.2-1.6 0-3 0.8-6.8 3.5-8.5 1.9-2.8 1.2-8.2 5.2-8.7 3.1-2.5 0.6-2.7-0.4-3.6-1.6-10.7-7.8-1.2-0.8-1.5-1.7-0.9-2-2-6.6-1.4-2.9-2-2.5-2.8-2.3-6.4-3-6.1-0.5-5.9 1.7-9.1 5.1-1.8 0.5-2.1-0.7-6.1-3.7-1-1.2-2.9-9.8-1.3-2.8-1.8-2.6-2.5-2 0.6-2 2.7-4.6 1.8-2.5 2-2.2 1.5-0.6 1.8-0.3 1.9-0.1 0.8-0.1 1.5-0.7 6.8-1.7 0.7-0.4 3.5-2.8 8.6-8.4 0.5-0.7 0.3-1.1 0.3-1.8-0.2-2.7 0.6-2.7 0.2-0.3 0.6-0.3 1.4-0.5 1.4-0.7 0.6-0.8 0.6-1.2 1.3-6.3 0-2.5-0.3-3-1.3-6.8-0.7-11.5-0.8-2.7-1.8-2.8-3.4-9.9 0.1-28.7 18.3-4.5 7.1-5.1 4.4-5.2 2.7-2.4 2.2-1.1 6.1-2 6.4 6.1 1.3 2.8 2.7 2.1 2.5 1.4 64.2 24.5 7.3 1.1 40.4-0.6 1.6-0.8 38.8-28 1.2-0.6 1.6-0.5 39.8 7.4 6.4-0.1 22.2-2.9 1.8-0.9 1.8-2 12.1-18.5 11.3-28.7 0.2-1.3 0.1-1.2-0.7-3.5-1.1-2.5-15.5-20.7-0.3-1.1 1.5-0.2 4.7-1.5 2.3-0.3 1.3 0.5 1.2 1.1 1.9 2.5 8.1 4.8 2.6 2 1.6 0.9 3.4 0.8 1.6 0.9 1.3 1.4 0.7 1.5 3.4 12.2 0.1 1.6 2 1.3 5 5.9 2.6 2.2 9.3 4.4 8.2 6.5 1.1 4.4 3 2.7 0.9 2.1 1.1 1.7 2.1 1 0.2 0.2 0.7 0.3 0.4 0.1 0.8 0.1 1.7 0 0.3 0.1-0.7 1.6-0.7 1.1-0.3 1.1 0.4 1.6 1 0.9 1.5 0.4 1.1 0.9-0.1 2.5-0.8 1.4-2.9 2.8-1.1 1.6-0.3 1.5-0.1 1.9-0.5 1.7-0.2 0.2-0.5 0.1-0.4 0.1-0.2 0.4-0.1 0.1-0.1 0.3-2.3 1.4-0.9 2.7 0.3 3.1 1.8 6.7 0.3 3.1-0.2 6.6 1.9 0.4 13.7 5.1 1 2-0.6 1.9-2.2 0.8 1.2 2.1 1.5 1.9 1.8 1.5 5.8 2.2 2.1 1.4 1.4 2.2 5.4 12.8 0.4 3.4-1.1 6.1-3.3 11.7 0 6.3 1.4 4 2.4 2.4 2.8 2.1 2.6 3.1 0.9 2.9-0.1 3.1-0.8 6.1-2.4 6.8-4.9 5.1-12.6 7.1 2 1.8 2 3 3 5.9 1.9 5.5 3.3 5.1 2.7 3.1 8.5 6.2 0.9 1.1 1.3 2.2 0.9 1 1.5 0.8 1.4 0.2 1.2 0.5 1 1.7-0.3 2.7-2.1 8.2z" id="SNTC" data-region="Tambacounda">
                            </path>
                            <path d="M623.1 560.9l0.7 0.4 0.5 0.7 0.3 1 0.2 3.3-0.2 1.1 0.1 2.4-0.3 0.9 0 0.8 0 1 0.7 1.2 0.1 2.5 0.3 1.3 1 2.3 2 2.2 0.8 0.7 0.8 0.4 0.5 0.6 0.1 1-0.1 0.9 0 0.9 0.3 0.8 2.3 1.4 1.6 1.7 1.1 1.4 1 1.1 0.4 0.6-0.3 0.9-0.4 0.7-0.2 0.6 0.3 0.6 1 0.5 0.9 0.2 0.7 0.3 0.2 0.6 0.7 4.7-0.3 0.8-0.5 0.6-0.2 0.7 0.3 0.8 0.7 1 0.5 2.4 0.5 1.3 1.4 1.5 2 1.4 0.6 0.6 0.6 3.6 0.6 1.1-0.2 1-0.6 0.3-0.9 0-0.7 0-0.6 0.1 0.1 0.5 0.7 0.5 0.5 0.7-0.1 0.8-0.3 0.7-0.9 1.3-0.3 0.7-0.2 0.8 0.1 0.9 0.3 1 1 1.1 0.4 1.4 0.4 0.9 0.2 0.9-0.3 5.6-0.3 0.8-0.7 1.3-0.2 0.8 0.3 0.9 1 1.3 1.1 0.8 1.9 1 1.6 0.6 1.9 0.3 3.4 0 1.6-0.3 1.1-0.5 0.7-0.3 0.9-0.2 1.9 0.9 1.2 3-0.4 2.3-6.7-1.8-47.7-1.7-52.4-0.3-38.4-0.1-13.9-0.1-52.3-0.2-11.9-0.1-40.5-0.1-1.2-9.3 1.3-4.5 2.2-4.9 0-7.1 0-5.3-2.6-4.4-3-3.6-0.4-5.3 0.4-4-5.2-3.6-4.8-3.1-0.4-3.6-0.4-4.9-3.1-8-2.1-3.5-7-1.4-5.2-3.5-0.8-5.4 1.7-5.7 1.3-5.8 0.4-6.7 4.8-0.9 4.8-1.8 4.3-2.8 3-4 0.9-4.2 0.6-9.4 2-3.3 3.4-3.5 3-3.2 3.4-1.4 4.1 2.7 6.6 6.2 7.3 5.4 0.1 0 9.7 5 4.9 1.3 5.7 0.5 2.2 0.6 5 3.1 2.7 0.8 3 0.6 1.6 1 2.9 4.2 4.2 3.7 4.9 2.1 5.4 0.6 5.5-0.6 4.7-1.2 1.7 0.6 4.2 3.9 1.4 1.3 2 1.1 2.1 0.6 4.7 0.2 1.9 0.6 1.7 1.7 1.1 1.5 1.4 1.3 1.6 1.1 5.3 2.8 3.9 1.1 4 0.3 8.4-0.8 8 1.6 4.3-0.2 3.2-1.6 7.1-5.4 2.2-1 2.6 0.1 6.3-2.3 5.9-0.1 6-1.6 11.1-1 7.3-3.2 4.2-6.4 0.6-7.8-3.5-7.2-1.5-1.2-3.4-2-1-0.9 1.9-0.9 1.4-0.5 1.6-0.2 0.8-0.2 0.6-0.5 0.3-0.7 0.2-0.8 0.4-0.6 0.6-0.4 0.7-0.2 1.6 0.2 1.6 0 0.7 0.2 0.4 0.6-0.1 0.9-0.6 1.5 0 1.5 0 0.5-0.1 0.2-0.6 0.8-0.4 0.6-0.3 0.7 0 0.9 0.4 0.9 1 0.8 0.9 0.1 0.7-0.2 1.3-0.8 0.8-0.3 0.8-0.2 0.9 0.1 0.8 0.1 2.2 0.9 1.6 0.4 0.4 0.3 0.2 0.4-0.3 0.8-0.5 0.6-2.7 2.6-0.3 0.7-0.4 0.7-0.1 0.8-0.1 0.8 0.1 0.9-0.1 1-0.2 0.8-0.4 0.7-0.4 0.6-0.4 0.5-0.4 0.6-0.2 0.7 0.3 0.7 0.9 0.5 0.9 0.3 1 0.1 0.9 0.1 1-0.1 3.6-0.7 1.9-0.1 0.8 0.3 0.5 0.5 0 1-0.4 0.7-1.3 1.9-0.1 0.6 0.3 0.7 0.8 0.6 0.8 0.4 0.5 0.8 0.1 1.1-0.2 1-0.4 1.6 0.2 0.9 0.5 0.9 1.5 1 2.1 0.8 0.7 0.4 0.4 0.8 0.2 1.3 0.3 1.1 0.4 0.9 1.1 0.8 0.9 0.2 1.8 0z" id="SN-KD" data-region="Kolda">
                            </path>
                            <path d="M369.3 542.3l-0.4 6.7-1.3 5.8-1.7 5.7 0.8 5.4 5.2 3.5 7 1.4 2.1 3.5 3.1 8 0.4 4.9 0.4 3.6 4.8 3.1 5.2 3.6-0.4 4 0.4 5.3 3 3.6 2.6 4.4 0 5.3 0 7.1-2.2 4.9-1.3 4.5 1.2 9.3-7.2-0.1-4.2 0.7-3.8 1.7-8.6 6.2-9 4.2-7.8 5.7-0.5 0.4-37.2 17.5-5.1 1-25.5-1.5-0.6-0.9-4.6-6.8-1.5-3.2-2.6-3.9-2.2-4.5-0.4-4 0.1-0.9 2.4 1.9 1.2 1.4 1.7 0.3 9.5 0.1 0.9 0.7 1.9 2 0.7 0.4 1.3-0.1 3.8-1 1.7-1 1.6-2 2.1-1.2 3.1 1.3 0.8-0.7 1-0.4 0.9-0.1 2 1.5 0.9-0.1 0.8-0.4 0.8 0.2 1.1 1.4 1 2.5 0.8 1.2 1 0.9 1 0.6 1.4 0.4 1.7 0 1.7-0.3 6.8-2.8 2.7-2.8 4.5-5.9 1.7-1.2 1.5-0.8 1.1-1.1 0.4-2-0.9-1-1.6-0.7-0.9-0.8 1.3-1.2-1.5-3.4-1.3-4.6-0.5-4.8 1.3-3.7 1.7-1.1 2.1 0 2.2 0.1 2-0.2 2.1-0.9 1.4-1.1 0.9-1.3 0.7-1.8 3 2.9 2.8 0.8 1.9-1.6 0.3-4.2-2.3 2.4-2.1-0.1-2.3-0.9-2.3-0.4-2.3 1-3.6 2.7-2.7 0.6-1.5 0-2.2 0.3-2 1-0.9 2.3 0 8.8 1.7 5.6 0.3 1.6 0.1 2.5-0.2 1.2-0.4 1-3.6 3.1-1.1 1.5-7.4 6.8-2 1.2-1.8 0.1-1.5-0.7-1.3-1.1 0.9-4.5-4.5-2.1-10.5-1.7-7.1 4.6-2.6 0.6-0.5-0.5-0.7-1.1-1-1-1.8-0.5-1.8 0.3-2.5 1.4-1.8 0.4-1.7-0.5-2.2-1.2-3.7-2.5-0.2-0.7 0.2-1.1 0.1-1-0.6-0.4-1.9-0.2-1-0.3-0.7-0.4-0.9-1.3-2.1-4-0.5-0.5-0.7-0.3-0.5-0.5-0.6-3.2-0.8-1.8-0.2-1.3 0.3-2.1 0.6-1.3 1.3-9.4 0.3-0.9 0.8-1 1.5-1.5 0.4-0.8 0.3-1 0.2-3.2 0.5-1.5-0.7-2.6-0.2-1.6 0.2-1.7 6.6-10.7 5.9-12.4 0.1-1.1-0.9-1.1-1-0.4-1.1-0.4-0.9-0.5-0.2-1.3 0.7-1.8 2.6-2.9 1.3-2.4 4 0.1 5.5 0 1-0.7 0.3-10.8 0-2.4 0.3-10.7 0.6-2.2 1.7-0.9 10.3-1 6.6-2.1 1.9-0.1 9.9 1 2.4-0.2 4.5-1.5 3.4-1.9 3.4-1.3 4.6 0.2 16.1 3.4 5.5 0z" id="SN-SE" data-region="Sédhiou">
                            </path>
                            <path d="M277.5 657.5l-0.1 0.9 0.4 4 2.2 4.5 2.6 3.9 1.5 3.2 4.6 6.8 0.6 0.9-1.4-0.1-11.7 0.9-2.9-0.6-9.2-3.1-5.3-0.4-11.1 1.9-1 0.5-0.6 0.5-0.7 0.2-1.3-0.2-3.1-1.2-1.6-0.3-1.6 0.3-10.2 5.5-11.8 6.5-4.5 1.8-7.4 0-7.7 2-2.7 0.1-20-1.4-5.5 1.4-3.3 2.3-1-1.9-0.7-2-0.6-3.1-1-1-2.2-1.6-3.4-3.3-1.5-2-0.6-1.9 0-6.3 0.3-1.4 1.4-1.3 0.4-1.4 1.1-1.6 7.3-4.4 3.2-0.1 4.6 0.4 4.9-3.1 1.6-1.3 0.9-1.3 0.6-1.2 1-1.5 5.6-4.1 2.7 3.2 2.1 5.7 2.1 1.3 0.1-2.4 1.5-1.8 2.6-0.7 2.9 0.6 4.9 2.8 4.5 1.3 4.9 2.3 2.5 0.2 2.9-1.4 3.6-4.4 2.6-1.4 3.4 0.1 3 1.1 2.9 0.3 3.4-2.1 1.7-0.7 1.1 1.3 0.9 1.9 0.8 1.1 11.5-4.3 2.7-0.6 3.5-0.2 2.3-0.7 1.9-1.4 2.2-1.1 3.2 0.1 2.6 1.4 3.9 3.1z m9.8-84.1l-1.3 2.4-2.6 2.9-0.7 1.8 0.2 1.3 0.9 0.5 1.1 0.4 1 0.4 0.9 1.1-0.1 1.1-5.9 12.4-6.6 10.7-0.2 1.7 0.2 1.6 0.7 2.6-0.5 1.5-0.2 3.2-0.3 1-0.4 0.8-1.5 1.5-0.8 1-0.3 0.9-1.3 9.4-0.6 1.3-0.3 2.1 0.2 1.3-0.9 0 0 1.2-0.2 0.6-1.6 3.1-0.7 1-0.5 5.1-4.1 2.7-6.1 1-1.5 0.7-3.1 2-0.9 0.4-1.5-0.2-3.6-0.9-5.6 0-1.7 0.4-2.8 1.2-1.5 0.4-1.8 0-4.8-0.9-1.6 0.3-2.1 1.4-1.3 0.4-0.5 0.7-0.7 1.6-1 1.7-1.4 1-6-2-4.9-2.8-2.3-1.9-1-2-0.5-0.4-1.4-0.4-1.4-0.7-0.7-1 0.3-1.5 0.9-1.4 1.3-0.9 1.5-0.4 0-1.1-2.2-0.1-1.5-1.1-0.8-1.8-0.5-2.2-1 12.5-1.1 0-2-2.6-5.4-4.7-0.7-3-1.7 1.4-1.1 1.7-1.4 1.4-2.3 0.6-1.8-0.4-1.2-1-0.6-1.6 0.1-2.1 2.1-4 3-2.9 1.9-3.5-0.9-5.3-0.7 4.1-0.3 1.2-0.8 1.3-0.7 0.6-0.7 0.5-2.9 2.7-1.3 1.6-0.6 1.9-0.2 3.2 1.1 5.4-0.3 2.5-4.5 1.9-6.4 5.4-5 1.8-2.7-1.7-1.2-3.9-0.2-5.1 0.8-5.4 2.3-5.3 3.8-3 5.2 1.8 0.2-2.3-2.1-1.6-3-0.6-2.6 0.9-3.1 3.7-1.7 1.2-1.8-0.4 0.8-1.2 0.3-1.3-0.3-1.3-0.8-1.3 3.2-4.5 0.6-2.2-0.7-2.7-1.1 0-0.7 1.7-1 0.7-0.9-0.5-0.4-2.3 0.3-1.8 0.9-2 5.3-7.9 0.5-1.9-0.1-1.9-0.7-3.6-0.2-1.7 0.3-3.2 1.5-6.3 0.3-4-0.2-2.5-0.6-1.2 0.2-3.5 0.5-1.7 0.9-1.3 2.4-2.3 0.4-1.4 2.2-3.7 5.2-1.2 6.4 0.1 24.3 0.2 22.5 0.2 32.6 0.3 19.3 0.2 9.4 0z" id="SN-ZG" data-region="Ziguinchor">
                            </path>
                            <path d="M608.8 119l-6.1 12.9-15 6.1-2.2 5.6-16.6 15-23.5 19.5-22 17.3-5.9-4.5-11.2-5.5-12.4-6.7-6.4-8.9-7.5-11.2-16.6-11.7-7.7 0.6-11.9-6.4-2.5-0.9-84.5-0.2-1 10.3-23.2 1.6-1.6-1-30.4-35-3.1-2.8-1.8-1.2-1 1.1-0.5 0.6-2.5 1.8-2.8 1.4-0.6 0.5-0.5 0.5-0.6 1.6-1.5 2.6-1 1.2-1 0.7-27.8 15.9-0.1 0-0.7 0.4-5.2 4.3-1 1.1-0.4 0.7-0.3 0.7-0.4 1.5-0.4 0.8-0.8 0.6-6.3 3.3-1.5 1.3-1 1.8-1.8 5.1-0.7 1.1-1.1 1.2-2.1 0.3-2.3 0.1-2.5 0.4-2.1 0.8-3.2 2.4-2.7 0.9-2.8 0.5-24 0.5-0.1 0-0.3-0.4 3.4-5.8 1.4-8.5 0.4-16.7 0.9-1.7 2-6.8 2.6-6.2 0.6-10.4 1.1-3.1 2.1-1.9 5.5-1.3 2.3-1.5 0.9-1.6 0.7-1.8 6-26 0.8-6.2 1.1-2.9 2-2.8 2.7-2.7 3.2-1.9 3.4-0.7 4.8 0.9 1.7 0.1 1.7-0.3 1.5-0.7 4.3-3.1 1.7-0.8 1.8-0.3 1.8 0.4 1.4 0.8 1.1 1.1 1.8 2.7 2.5 2.7 3 1.4 3.3 0.4 3.5-0.5 1.1-0.7 1-0.6 1.1-0.2 1.3 0.3 1.9 0.8 0.9 0.1 1.1-0.2 5.8-2.7 2.1-0.2 5.2 1.2 1.2 0 3.7-0.6 2.3 0.1 6.7 2.2 4.8 0.3 1.2 0.4 3.5 1.6 2.3 0.6 2.3-0.1 2.2-0.7 2-1.4 3.3-3 1.7-1.1 2.3-0.3 6.3 1.3 2.2-0.2 1.8-0.9 1.4-1.3 3.6-5.2 1.8-1.6 2.1-1 2.3 0.2 1.4 1.1 0.8 1.6 1 1.4 1.8 0.8 2.2 0 2.1-0.5 6.2-2.7 2.3-0.5 4.7-0.1 7 1.1 2.4-0.1 15.9-2.5 3.1-1.2 0.9-0.6 0.7-0.9 0-1.1-0.5-1-2.4-2.4-0.8-2 0.3-2 1.2-1.5 2.2-0.6 2.1 0.6 1.3 1.5 1.2 1.8 1.5 1.5 1.1 0.3 1.1-0.1 1-0.4 0.9-0.7 0.8-1 0.3-1 0.5-2.1 0.9-1.5 1.5-1 3.3-1.4 1.7 0.9 1.9 2.1 0.2 0.3 1.1 2.2 1.5 1.9 2.7 0.5 4.5-1.1 25.3 1.8 1.7-0.2 4.9-1.3 1.5 0 1.3 0.3 4.2 2 1.6 0.3 1.6-0.1 6.2-1.7 1.6-0.1 6 1.3 1.6 0 1.5-0.2 1.6-0.4 1.4-0.7 3.9-2.3 1.4-0.6 2.9-0.1 9.4 3.7 1.1 0.8 0.6 1.1 0 1.7-0.8 2.9 0.2 1.2 1.4 0.6 5.7-0.5 1.4 0.7 0.5 1.2 0.2 2.8 0.8 1.2 1.5 0.7 3.6 0.2 1.6 0.3 1.2 0.7 2.5 3.4 1.1 0.9 3.5 2.5 5 5.9 8.8 8 4.9 2.9 1 0.9 2.5 3.1 1.4 0.9 2.9 1.1 1.3 0.8 0.9 1 0.1 1.1-0.9 2.3-0.3 1.3 0.3 1.1 1.5 1.9 0.6 1.3 0.1 1.3-0.8 2.8 0.6 2.5 2.5 1.3 5.8 1.7 1.2 0.8 2.3 1.7 1 1.1 0.7 1.2 1.3 4.2 0.7 1.5 0.9 1.3 1.2 1.1 1.3 0.9 1.2 0.3 1.2-0.1 1.2-0.4 2.4-1.4 2.4-1.9 1-1.1 2.6-3.8 1.1-1.1 1.3-0.7 1.3-0.4 1.4-0.1 1.4 0.2-0.3 2-0.9 2.5-0.6 2.1 0.4 1.6z" id="SN-SL" data-region="Saint-Louis">
                            </path>
                            <path d="M760.9 278.9l0.3 1.1 15.5 20.7 1.1 2.5 0.7 3.5-0.1 1.2-0.2 1.3-11.3 28.7-12.1 18.5-1.8 2-1.8 0.9-22.2 2.9-6.4 0.1-39.8-7.4-1.6 0.5-1.2 0.6-38.8 28-1.6 0.8-40.4 0.6-7.3-1.1-64.2-24.5-2.5-1.4-2.7-2.1-1.3-2.8-6.4-6.1-6.1 2-2.2 1.1-2.7 2.4-4.4 5.2-7.1 5.1-18.3 4.5 0.3-2.4 0-1.7-0.2-1.9-1-1-2.3-1-24-7.1-4-1.9-2.7-2.4 5.6-4.2 2.2-12.2 6.4-4.4 5.4-11.1-6.5-14.4-4.2-15 10.1-3.9 16.6-2.2 11.7-3.5-6.3-3.1 2.7-16.7 4.8-21.1-12.3 1.7-24.7-12.8 5.4-8.3 1.1-27.8 4.2-1.7 7.5-2.8 5.9-3.9 11.8-11.1 6.4 8.9 12.4 6.7 11.2 5.5 5.9 4.5 22-17.3 23.5-19.5 16.6-15 2.2-5.6 15-6.1 6.1-12.9 0.7 0.4 1.6 0.6 0.6 0.5 0.2 0.3 0.2 0.5 0.2 0.2 0.4 0.3 0.9 0.3 0.4 0.2 1 0.9 0.3 0.2 1 0.2 1-0.3 4-2.2 0.9-0.2 2.8 0 0.5 0 1.1-0.4 4.5-1.9 7.7-1.7 2-0.8 0.9-0.3 0.8 0 1 0.2 0.3 2.1-2.5 4.7-0.3 2.4 1.5 1 5.4-2.1 2.2 0.1 0.7 0.8 1.2 2.1 0.8 0.8 4 2.8 0.9 1.1 0.4 1.2 0.1 2.7 0.2 1.2 2.1 5.1 0.9 1.6 1.1 1.5 1.3 1.3 3.8 2.9 0.8 1.2 0.4 1.3-0.1 1.3-0.6 2.6 0 1.2 0.3 1.1 0.6 0.9 2.7 3.1 1.3 2.4 0.7 2.6 0.1 3-0.3 1.3-0.5 1.3-0.4 1.3 0.2 1.3 0.8 1 1 0.8 2.3 1.4 1.2 0.9 1 1.1 1.6 2.4 0.7 1.3 0.1 1.1-0.2 1.2-2.2 3.5-0.6 1.2-0.1 1.4 0.2 1.3 1.4 3.8 2.2-0.1 4.4-0.8 2.2 0.2 1 0.4 2.8 2 1 0.4 3.4 0.9 1.9 1.1 1.6 1.5 1 1.8 0.4 2.1-0.9 5.8 0.1 1.3 0.2 1.3 0.5 1.5 0.9 0.6 4.5 1.2 2.1-0.3 2.3-1.4 1.9-1.6 2.2-1.2 2.3-0.3 2.3 1.1 1 1.1 0.4 1.4 0.6 4.2 0.5 1 1.5 2 0.7 1.2 0.2 1.1 0.1 5.2 0.5 2.5 1.2 2.3 1.8 2 8.8 6 1.9 2 1 2.5-0.8 2.1-2.5 0.4-5-0.5-1.5 1.1 0.9 1.9 3.3 3.4 1.3 1.1 1.3 0.4 1.4 0.1 3.2-0.7 1.6 0 1.4 0.4 1.4 1 0.8 1 0.3 1.2 0.1 1.2-0.8 3.9 0.1 1.2 0.4 1.4 0.2 0.4 3.7 1.2 1.2 1.2 4.3 4.2 4 1.7 0.1 0z" id="SN-MT" data-region="Matam">
                            </path>
                            <path d="M474 367.7l-0.1 28.7 3.4 9.9 1.8 2.8 0.8 2.7 0.7 11.5 1.3 6.8 0.3 3 0 2.5-1.3 6.3-0.6 1.2-0.6 0.8-1.4 0.7-1.4 0.5-0.6 0.3-0.2 0.3-0.6 2.7 0.2 2.7-0.3 1.8-0.3 1.1-0.5 0.7-8.6 8.4-3.5 2.8-0.7 0.4-6.8 1.7-1.5 0.7-0.8 0.1-1.9 0.1-1.8 0.3-1.5 0.6-2 2.2-1.8 2.5-2.7 4.6-0.6 2-2.7-2.2-5.4-1.9-14.9-0.6-8.8-3.4-3.2-0.1-10.8 3.9-11.1 7.2-3.1 0.7-1.3-0.9-2.8-3.8-1.4-1.3-6.4-1.1-6.8 2.6-7.5-3.5-4.3 0-5.9-0.5-10.2-4.5-3.2 5-2.7 4.4-2.7 1.1-3.7-1.6-4.3-4.4-2.1-4.5 0-3.8 1.6-3.9-0.6-3.8-6.4-3.9-5.4-5.5-1.6-3.3-0.5-3.9-2.1-2.8-6.5-1.1 0-7.7 0-9.9 1.6-5.6 3.8-8.2 2.7-6.7 0.2-14.7 3.9-3.1 3.4-4.2 5.8-6.7 3.8-0.4 3.4-1.8 6.9-5.6 3.1-2.5 3.4-0.7 7.2-1.1 7.9-1.4 5.5-1.4 4.4-5 3.2-13.9 11.8 7.1 7.4 2.9 22.5 4.5 5.1 0.5 3.4-0.8 2.9-1.2 13-8 2.5-1.2 2.5-0.6 1.8 1.4 3.4 4.6 2.7 2.4 4 1.9 24 7.1 2.3 1 1 1 0.2 1.9 0 1.7-0.3 2.4z" id="SN-KA" data-region="Kaffrine">
                            </path>
                            <path d="M361.7 480.2l-6.3 4.6-4.6 5-1.6 2.6-1.6 3.2-1.1 3.3-0.2 1.1-0.4 2-0.2 6.1-2.4 0.8-7.2-0.1-9.2 0-9.1 0-9.2-0.1-9.2 0-9.1 0-9.2-0.1-9.2 0-9.1-0.1-3.2 0-0.5-1-0.8-3-2-2.7-4.8-4.3-1.2-1.6-0.8-1.4-0.5-2.2-0.7-5-0.6-2-1-1.2-1-0.8-2.4-1.4-4.7-3.9-1.4-1.5-0.5-1.4-0.2-1.3 0.1-2.2 0.1-1.1 0.4-1 0.8-0.9 2.2-1.9 1.6-2.2 0.8-1.1 0.4-1.2 0.2-1.2 0-1.2-1.7-10.4-1-1.5-1.8-1.7-3-3.9-0.1-1.2 0.5-1.2 1.5-2.2 0.5-1.2 0.2-1.7-0.1-1.9-0.6-3.3-1-1.6-1-1.3-2.1-1.7-4.2-2.7-0.8-0.7-0.8-0.5-0.8-0.1-9.5-0.3-0.1 0 1.2-0.8-2.3 0 0-0.1 2.1-2.8 1.5-5.1 7.4-11.1 4-4.9 1.7-1.4 1.5-0.7 4.7-0.4 8.9-2 7.6-0.7 1.3 0.2 0 0.7 0.8 0.7 12.5 2.2 3.1-1.1 2.8-2.8 3-1.4 7.2 0.3 11 0.4 4.7-3-0.2 14.7-2.7 6.7-3.8 8.2-1.6 5.6 0 9.9 0 7.7 6.5 1.1 2.1 2.8 0.5 3.9 1.6 3.3 5.4 5.5 6.4 3.9 0.6 3.8-1.6 3.9 0 3.8 2.1 4.5 4.3 4.4 3.7 1.6 2.7-1.1 2.7-4.4 3.2-5 10.2 4.5 5.9 0.5 4.3 0 7.5 3.5z" id="SN-KL" data-region="Kaolack">
                            </path>
                            <path d="M259.6 508.5l-6 0-9.2 0-9.1 0-9.2-0.1-9.2 0-9.2-0.1-9.1 0-9.3 0 0-0.1-1.4-2.2-0.8-1.6 0.1-4.2 2.5-2.4 3.7-1.9 3.8-3-0.8-0.4-1.5-1.2-0.8-0.4 1.8-1.8 1.4-2.3-0.2-1.8-3-0.4 0.4 2.5-0.8 2.9-1.5 2.1-2.2-0.2-1 3.2-2.3 2.1-2.9 0.9-2.8-0.9-2.6-2.8-0.7-2.8 1.3-5.9 0.2-3.8 0.4-1.5 1.4-2 5.2-6.3 0.9-2.1 0.9 0.6 2.3 1.1 0.8 0.5-0.3-0.7-0.8-2.5 5.2-1 0.2 3 1.1 2.9 1.7 1.7 2.1-0.4-1.1-3.5-0.3-3.8-0.6-3.1-2.2-1 0.8-2.1 3.2-14.1 0.2-2.5-3.2 4.7-1.4 3-1.1 6.3-1.5 3.8-2 2.5-2-0.6-1.1 0-1.4 2-2.7 0.8-3 0.4-2.9 1-1.6 1.3-0.5 1.3-0.2 1.3-0.8 1.3-0.8 0.8-1.7 1-0.9 0.8-1.5 2.8-1.1 1-1.5-0.7-0.5-1.5 0-1.9-0.3-1.6-1.3-0.7-1.9-1.3-0.8-3 0.2-3.2 1-1.9-0.9-2.1-0.6-2.3-0.5-4.9 0.2-2.6 0.5-1.5 0.9-1 3.4-2.7 1.7-0.7 1.9-0.1 4.3 0.5 2.1 0.7 1.4 1.2-0.2 2 2.1-1.9 1.6-2.2 2.1-1.2 3.3 1.2 0-3.4 1.1-1.5 1.9-0.9 2-1.6-1.8 0.6-2 0.5-1.9-0.4-1.4-1.7 6.7-4.1 2.4-2.2 3.8-4.7 2.1-1.8 4.7-1.4 2.3-2.9 1.8-0.7 1.3 0.6 1.1 1.1 1.3 0.7 1.4-0.8 0.9-0.7 2.4-1.1 0-0.1 0.1 0 9.5 0.3 0.8 0.1 0.8 0.5 0.8 0.7 4.2 2.7 2.1 1.7 1 1.3 1 1.6 0.6 3.3 0.1 1.9-0.2 1.7-0.5 1.2-1.5 2.2-0.5 1.2 0.1 1.2 3 3.9 1.8 1.7 1 1.5 1.7 10.4 0 1.2-0.2 1.2-0.4 1.2-0.8 1.1-1.6 2.2-2.2 1.9-0.8 0.9-0.4 1-0.1 1.1-0.1 2.2 0.2 1.3 0.5 1.4 1.4 1.5 4.7 3.9 2.4 1.4 1 0.8 1 1.2 0.6 2 0.7 5 0.5 2.2 0.8 1.4 1.2 1.6 4.8 4.3 2 2.7 0.8 3 0.5 1z m96.6-150.5l-5.5 1.4-7.9 1.4-7.2 1.1-3.4 0.7-3.1 2.5-6.9 5.6-3.4 1.8-3.8 0.4-5.8 6.7-3.4 4.2-3.9 3.1-4.7 3-11-0.4-7.2-0.3-3 1.4-2.8 2.8-3.1 1.1-12.5-2.2-0.8-0.7 0-0.7-1.3-0.2-7.6 0.7-8.9 2-4.7 0.4-1.5 0.7-1.7 1.4-4 4.9-7.4 11.1-1.5 5.1-2.1 2.8 0 0.1-7-0.3-4-1.5 0.2-3.3-2.3 1.2-0.9 2.2 0.5 2.3 1.6 1.5-1.8 1.1-1.5-0.2-1.5-0.5-1.7-0.4-1.2 0.5-0.6 1.2-0.3 1.4-0.4 1.2-3.8 6.7-1.4 1.6-1.5 0.7-3.2 0.8-1.7 1.1-1.3 1.7-1.9 3.5-1.4 1.6-3.4 1.1-3.1-0.7-3.2-1.1-3.5-0.3 3.4-6.3 0.1-1.1 2.5-0.7 4.1-4.6-2 0.6-1.9 3-1.6 0.7-3.3 0.1-1.3 0.3-1 0.6 1.7 2.1-0.2 1.3-2.5 3-0.4 1.1-0.4 2.2-0.7 1.3-3 3.4-0.6 1.3-0.7 4.3 0.7 14.4-0.9 0-0.9-29.2-0.7-4.4-2.5-7.3-1.3-2.6 0.1 0 1.1-1.3 4.2-1.3 0.7-0.8 0.1-0.8-0.3-0.6-0.5-0.7-0.5-0.7 0-1.3 0.4-0.7 3.8-3.2 0.7-1.2 0-0.9-0.5-0.6-0.6-0.5-0.5-0.5-0.5-0.6 2.1-8.8 7.4-21.5 0.5-0.3 0.8-0.2 4.8-0.3 0.9-0.2 0.7-0.4 0.6-0.4 0.5-0.6 1.5-1.8 1.1-0.9 0.7-0.3 1.6-0.5 1.3-0.8 2.4-2.6 3.9-5.1 0.7-1.3 1.1-3.2 1.1-4.6 1.8-2.8 1.9-0.6 6.5-0.6 12.6 0.6 1.4 0.3 0.7 0.5 1.2 1.1 0.8 0.6 1.2 0.8 1.1 0.2 1 0 7.7-1.7 1.6-0.1 4.9 0.6 4.9 1.6 1.4 0.7 1.9 1.3 1.6 1.7 1.4 0.6 2.2 0.6 16.1 2.9 2 0 12.4-1.3 5-1.3 3.7-1.7 0.6-0.4 8-8 0.4-0.6 0.3-0.8 0.4-1.7 0.7-13 0.3-0.8 0.3-0.7 0.6-0.7 0.7-0.5 1.9-0.9 0.6-0.4 7.4 5.3 3.1-0.3 4.1-1.5 2.7 0.4 3.4 3.5 4.8 2.2 19.6 7.8 3.4 2.8 2.1 5.3z" id="SN-FK" data-region="Fatick">
                            </path>
                            <path d="M192.4 169.6l0.1 0 24-0.5 2.8-0.5 2.7-0.9 3.2-2.4 2.1-0.8 2.5-0.4 2.3-0.1 2.1-0.3 1.1-1.2 0.7-1.1 1.8-5.1 1-1.8 1.5-1.3 6.3-3.3 0.8-0.6 0.4-0.8 0.4-1.5 0.3-0.7 0.4-0.7 1-1.1 5.2-4.3 0.7-0.4 0.1 0 27.8-15.9 1-0.7 1-1.2 1.5-2.6 0.6-1.6 0.5-0.5 0.6-0.5 2.8-1.4 2.5-1.8 0.5-0.6 1-1.1 1.8 1.2 3.1 2.8 30.4 35 1.6 1 23.2-1.6 1-10.3 84.5 0.2 2.5 0.9 11.9 6.4 7.7-0.6 16.6 11.7 7.5 11.2-11.8 11.1-5.9 3.9-7.5 2.8-4.2 1.7-1.1 27.8-5.4 8.3 24.7 12.8 12.3-1.7-4.8 21.1-2.7 16.7 6.3 3.1-11.7 3.5-16.6 2.2-10.1 3.9 4.2 15 6.5 14.4-5.4 11.1-6.4 4.4-2.2 12.2-5.6 4.2-3.4-4.6-1.8-1.4-2.5 0.6-2.5 1.2-13 8-2.9 1.2-3.4 0.8-5.1-0.5-22.5-4.5-7.4-2.9-11.8-7.1-5.3-3.3-3.9-4.2-0.9-3.3-0.7-9.2-0.5-0.7-0.5-0.6-1.3-0.4-1.9-0.1-9.8 0.9-1.3-0.2-2.2-0.8-1.2-0.7-1.4-1-0.7-0.3-4.1-0.4-7.8 0.3-3.8 1.1-2.6-2.1-0.7-2-0.1-2-0.2-0.8-0.4-0.7-0.4-0.6-2.5-1.7-3.8-1.6-0.6-0.5-0.5-0.5-0.4-0.6-0.9-2.3-0.4-0.6-0.6-0.3-1-0.4-0.6-0.4-0.6-0.4-0.4-0.7-0.3-0.8-0.2-0.9-0.1-2 0.1-1.4-2.3-0.4-36.2 0.2-3.4 0.9-4.7 4.1-3.3-1.7-3.3-1.2-0.7-0.4-0.8-0.6-0.8-0.8-1-1.6-0.4-1.1-0.4-1.1-0.5-2.7-0.2-0.8-0.4-0.8-0.8-1.3-4.3-5.2-0.8-1.3-1.4-3.8-0.3-1.5-0.2-1.3 0.1-1.3 0.1-0.6 0.4-3.9-0.4-2.1-0.7-1.6-0.5-1-0.4-0.6-1.3-2.9-0.5-0.6-0.6-0.3-0.8 0.3-1.3 1-0.6 0.3-0.7 0.1-0.6-0.3-0.6-0.9-0.4-2-0.9-7.3-0.2-0.8-0.3-0.6-0.6-0.6-0.8-0.4-1.4-0.1-0.9 0-2.2 0.6-1.8 0.2-6.9-1.8-1.1 0-1 0.2-0.6 0.5-0.6 0.5-0.5 0.5-1.2 1.9-1.4 1.7-1.7 2.5-1 1.1-2.3 3-0.8 2.3-0.5 1.7-0.5 1.5-0.8 1.2-6.7 7.1-0.7 1.3-2 2.2-0.5 0.5-0.6 0.4-0.8 0.1-0.7-0.1-0.8-0.4-0.6-0.8-0.7-1.4-0.2-2.4 0.2-0.7 0.2-0.5 0.4-0.6 0.2-0.6 0.1-0.7-0.2-0.8-0.4-0.8-1-1.2-0.9-0.6-2.3-1.1-1.3-0.8-0.6-0.5-0.5-0.5-1.8-2.5-0.9-1.9-0.5-0.7-0.5-0.6-0.9-0.6-1.7-0.8-1.2-0.3-0.9-1.7-0.4-2.9 0.8-6.4 1-3.6 2.7-5.3 0.7-3 0-1-0.1-0.8-0.7-1.8-0.7-1.1-4.4-3.6-0.7-0.4 9.6-13 19.3-32.6 0.7-1.5-0.2-1.6-0.7-1.7z" id="SN-LG" data-region="Louga">
                            </path>
                            <path d="M193.8 357l-1.1 4.6-1.1 3.2-0.7 1.3-3.9 5.1-2.4 2.6-1.3 0.8-1.6 0.5-0.7 0.3-1.1 0.9-1.5 1.8-0.5 0.6-0.6 0.4-0.7 0.4-0.9 0.2-4.8 0.3-0.8 0.2-0.5 0.3-7.4 21.5-2.1 8.8 0.5 0.6 0.5 0.5 0.6 0.5 0.5 0.6 0 0.9-0.7 1.2-3.8 3.2-0.4 0.7 0 1.3 0.5 0.7 0.5 0.7 0.3 0.6-0.1 0.8-0.7 0.8-4.2 1.3-1.1 1.3-0.1 0-1.4-2.8-1.3-1.7-1.9-0.9-3.8-0.8-1.5-1.4-0.8-2.2-1.2-8.2-1-2.6-1.2-1.9-2.8-2.9-1.3-0.7-0.9-0.2-0.7-0.6-0.2-2 0.2-1.6 0.7-3 0.2-1.7-0.7-2.5-1.8-2.7-4.6-4.7-10.6-5-1.6-1.8-0.9-2-5.2-7.9-3.9-10.5-1.5-2.1 0-0.1 2.8-20.9-0.2-1.4-0.5-1.4-2.3-3.9-0.5-1.4-0.1-3.6-0.1-0.8-0.8-2.8-3.1-6.8-0.2-0.3 1.4-0.5 5-4.2 23.5-28.1 4.7-7 10.3-11.5 20.5-36.7 0.6-0.7 0.7 0.4 4.4 3.6 0.7 1.1 0.7 1.8 0.1 0.8 0 1-0.7 3-2.7 5.3-1 3.6-0.8 6.4 0.4 2.9 0.9 1.7 1.2 0.3 1.7 0.8 0.9 0.6 0.5 0.6 0.5 0.7 0.9 1.9 1.8 2.5 0.5 0.5 0.6 0.5 1.3 0.8 2.3 1.1 0.9 0.6 1 1.2 0.4 0.8 0.2 0.8-0.1 0.7-0.2 0.6-0.4 0.6-0.2 0.5-0.2 0.7 0.2 2.4 0.7 1.4 0.6 0.8 0.8 0.4 0.7 0.1 0.8-0.1 0.6-0.4 0.5-0.5 2-2.2 0.7-1.3 6.7-7.1 0.8-1.2 0.5-1.5 0.5-1.7 0.8-2.3 2.3-3 1-1.1 1.7-2.5 1.4-1.7 1.2-1.9 0.5-0.5 0.6-0.5 0.6-0.5 1-0.2 1.1 0 6.9 1.8 1.8-0.2 2.2-0.6 0.9 0 1.4 0.1 0.8 0.4 0.6 0.6 0.3 0.6 0.2 0.8 0.9 7.3 0.4 2 0.6 0.9 0.6 0.3 0.7-0.1 0.6-0.3 1.3-1 0.8-0.3 0.6 0.3 0.5 0.6 1.3 2.9 0.4 0.6 0.5 1 0.7 1.6 0.4 2.1-0.4 3.9-0.1 0.6-0.1 1.3 0.2 1.3 0.3 1.5 1.4 3.8 0.8 1.3 4.3 5.2 0.8 1.3 0.4 0.8 0.2 0.8 0.5 2.7 0.4 1.1 0.4 1.1 1 1.6 0.8 0.8 0.8 0.6 0.7 0.4 3.3 1.2 3.3 1.7-0.6 2-1.3 0.8-7 3.8-1.7 0.4-2 0.2-1.3-0.2-0.9-0.3-0.8-0.4-0.6-0.4-0.4-0.6-0.3-0.8-0.2-0.8 0-0.9-0.3-0.8-0.5-0.7-1-0.6-2.4-0.9-0.7-0.4-4.9-4.1-0.8-0.2-0.5 0-0.3 0.1-0.1 0.1-0.2 0.1-0.6 0.3-1.2 0.2-2.1 0.3-1.3 0-1.1-0.2-1.3-0.5-1.7-1-0.4-0.4-0.4-0.3-0.6-0.3-35.5 10.3-2.8 1.5-1.4 2.2-0.9 2.4-0.6 3.4 0.1 0.7 0.3 0.5 0.8 0.8 0.6 0.3 1.4 0.4 0.7 0.3 0.6 0.4 0.4 0.6 0.3 0.8 0.1 1 0 3.8-0.4 1.6-0.1 0.9 0.3 1.8 0.2 0.8 0.3 0.8 0.6 0.5 1.4 0.6 0.6 0.4 0.6 0.5 0.5 0.5 0.4 0.6 0.1 0.7-0.1 0.7-0.5 1.6-0.2 1.3-0.1 1.3 0.3 0.7 0.4 0.5 0.6 0.5 1.4 0.6 0.6 0.5 0.5 0.5 0.4 0.7 0.2 0.9 0.2 0.9-0.4 1.3-0.8 1.5-2.2 2.4-1 1.4-0.6 1 0 0.9 0.1 0.9 0.4 0.7 0.5 0.5 1.7 1.1 7.5 3.4 3.1 0.9z" id="SN-TH" data-region="Thiès">
                            </path>
                            <path d="M97.7 308.7l0.2 0.3 3.1 6.8 0.8 2.8 0.1 0.8 0.1 3.6 0.5 1.4 2.3 3.9 0.5 1.4 0.2 1.4-2.8 20.9 0 0.1-4.4-6.1-4.3-4-2.5-1.7-2.9-1.4-3.2-0.5-2.4-0.7-6.3-3.3-0.9-1.1-4.9 0-4.2-0.5-3.7 0.3-3.3 2.4 1.2 1.4 1.8 0.6-1.1 2.2-1.9 0.9 0.5 0.5 0.9 1.1 0.5 0.5-0.9 2.1-0.5 0.2-0.5 0.9-2-1.3-9.9-12.4-2.3-2.1 24.3-6.6 7.2-5.9 20.7-8.9z" id="SN-DK" data-region="Dakar">
                            </path>
                            <path d="M363.8 339.1l-3.2 13.9-4.4 5-2.1-5.3-3.4-2.8-19.6-7.8-4.8-2.2-3.4-3.5-2.7-0.4-4.1 1.5-3.1 0.3-7.4-5.3-0.6 0.4-1.9 0.9-0.7 0.5-0.6 0.7-0.3 0.7-0.3 0.8-0.7 13-0.4 1.7-0.3 0.8-0.4 0.6-8 8-0.6 0.4-3.7 1.7-5 1.3-12.4 1.3-2 0-16.1-2.9-2.2-0.6-1.4-0.6-1.6-1.7-1.9-1.3-1.4-0.7-4.9-1.6-4.9-0.6-1.6 0.1-7.7 1.7-1 0-1.1-0.2-1.2-0.8-0.8-0.6-1.2-1.1-0.7-0.5-1.4-0.3-12.6-0.6-6.5 0.6-1.9 0.6-1.8 2.8-3.1-0.9-7.5-3.4-1.7-1.1-0.5-0.5-0.4-0.7-0.1-0.9 0-0.9 0.6-1 1-1.4 2.2-2.4 0.8-1.5 0.4-1.3-0.2-0.9-0.2-0.9-0.4-0.7-0.5-0.5-0.6-0.5-1.4-0.6-0.6-0.5-0.4-0.5-0.3-0.7 0.1-1.3 0.2-1.3 0.5-1.6 0.1-0.7-0.1-0.7-0.4-0.6-0.5-0.5-0.6-0.5-0.6-0.4-1.4-0.6-0.6-0.5-0.3-0.8-0.2-0.8-0.3-1.8 0.1-0.9 0.4-1.6 0-3.8-0.1-1-0.3-0.8-0.4-0.6-0.6-0.4-0.7-0.3-1.4-0.4-0.6-0.3-0.8-0.8-0.3-0.5-0.1-0.7 0.6-3.4 0.9-2.4 1.4-2.2 2.8-1.5 35.5-10.3 0.6 0.3 0.4 0.3 0.4 0.4 1.7 1 1.3 0.5 1.1 0.2 1.3 0 2.1-0.3 1.2-0.2 0.6-0.3 0.2-0.1 0.1-0.1 0.3-0.1 0.5 0 0.8 0.2 4.9 4.1 0.7 0.4 2.4 0.9 1 0.6 0.5 0.7 0.3 0.8 0 0.9 0.2 0.8 0.3 0.8 0.4 0.6 0.6 0.4 0.8 0.4 0.9 0.3 1.3 0.2 2-0.2 1.7-0.4 7-3.8 1.3-0.8 0.6-2 4.7-4.1 3.4-0.9 36.2-0.2 2.3 0.4-0.1 1.4 0.1 2 0.2 0.9 0.3 0.8 0.4 0.7 0.6 0.4 0.6 0.4 1 0.4 0.6 0.3 0.4 0.6 0.9 2.3 0.4 0.6 0.5 0.5 0.6 0.5 3.8 1.6 2.5 1.7 0.4 0.6 0.4 0.7 0.2 0.8 0.1 2 0.7 2 2.6 2.1 3.8-1.1 7.8-0.3 4.1 0.4 0.7 0.3 1.4 1 1.2 0.7 2.2 0.8 1.3 0.2 9.8-0.9 1.9 0.1 1.3 0.4 0.5 0.6 0.5 0.7 0.7 9.2 0.9 3.3 3.9 4.2 5.3 3.3z" id="SN-DB" data-region="Diourbel">
                            </path>
                          </g>
                        </svg>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Deuxième carte (avancement du projet) -->
        <div class="col-lg-4 col-md-6 mt-4 mb-4">
          <div class="card" style="border: 1px solid #004600;">
            <div class="card-body">
              <h6 class="card-title mb-3" style="color: #004600;">Avancement de la composante</h6>
              <div class="card h-100">
                <div class="card-body">
                  <div class="row g-3">
                    <!-- Progress 1 -->
                    <div class="col-4">
                      <div class="text-center">
                        <span class="text-sm fw-semibold d-block">Avancement</span>
                        <span class="text-xs text-muted" id="phy_reel">
                        </span>
                      </div>
                      <div class="progress mt-2" style="height: 6px;">
                        <div class="progress-bar" id="progress_phy_reel" style="background-color: #004600; width: 0%"></div>
                      </div>
                    </div>
                    
                    <!-- Progress 2 -->
                    <div class="col-4">
                      <div class="text-center">
                        <span class="text-sm fw-semibold d-block">Cible trimestrielle</span>
                        <span class="text-xs text-muted" id="phy_prev">
                        </span>
                      </div>
                      <div class="progress mt-2" style="height: 6px;">
                        <div class="progress-bar" id="progress_phy_prev" style="background-color: #004600; width: 0%"></div>
                      </div>
                    </div>
                    
                    <!-- Progress 3 -->
                    <div class="col-4">
                      <div class="text-center">
                        <span class="text-sm fw-semibold d-block">Cible annuelle</span>
                        <span class="text-xs text-muted" id="phys_cible">
                        </span>
                      </div>
                      <div class="progress mt-2" style="height: 6px;">
                        <div class="progress-bar" id="progress_phy_cible" style="background-color: #004600; width: 0%"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Deuxième ligne - 3 cartes avec progress bars -->
            <div class="card-body">
              <div class="card h-100">
                <div class="card-body">
                  <div class="row g-3">
                    <!-- Progress 4 -->
                    <div class="col-4">
                      <div class="text-center">
                        <span class="text-sm fw-semibold d-block">décaissement</span>
                        <span class="text-xs text-muted" id="dec_reel">
                        </span>
                      </div>
                      <div class="progress mt-2" style="height: 6px;">
                        <div class="progress-bar" id="progress_dec_reel" style="background-color: #004600; width: 0%"></div>
                      </div>
                    </div>
                    
                    <!-- Progress 5 -->
                    <div class="col-4">
                      <div class="text-center">
                        <span class="text-sm fw-semibold d-block">Cible trimestrielle</span>
                        <span class="text-xs text-muted" id="dec_prev">
                        </span>
                      </div>
                      <div class="progress mt-2" style="height: 6px;">
                        <div class="progress-bar" id="progress_dec_prev" style="background-color: #004600; width: 0%"></div>
                      </div>
                    </div>
                    
                    <!-- Progress 6 -->
                    <div class="col-4">
                      <div class="text-center">
                        <span class="text-sm fw-semibold d-block">Cible annuelle</span>
                        <span class="text-xs text-muted" id="dec_cible">
                        </span>
                      </div>
                      <div class="progress mt-2" style="height: 6px;">
                        <div class="progress-bar" id="progress_dec_cible" style="background-color: #004600; width: 0%"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
        
            <div class="card-body">
              <div class="card h-100">
                <div class="card-body">
                  <div class="row g-3">
                    <!-- Progress 7 -->
                    <div class="col-12">
                      <div class="text-center">
                        <span class="text-sm fw-semibold d-block">Performance trimestrielle</span>
                        <span class="text-xs text-muted">80%</span>
                      </div>
                      <div class="progress mt-2" style="height: 6px;">
                        <div class="progress-bar" style="background-color: #004600; width: 80%"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
        
            <div class="card-body">
              <div class="card h-100">
                <div class="card-body">
                  <h6 class="card-title mb-3" style="color: #004600;">Projection fin d'année</h6>
                  <div class="row g-3">
                    <!-- Progress 8 -->
                    <div class="col-6">
                      <div class="text-center">
                        <span class="text-sm fw-semibold d-block">Taux d'avancement</span>
                        <span class="text-xs text-muted">0%</span>
                      </div>
                      <div class="progress mt-2" style="height: 6px;">
                        <div class="progress-bar" style="background-color: #004600; width:0%"></div>
                      </div>
                    </div>
                    
                    <!-- Progress 9 -->
                    <div class="col-6">
                      <div class="text-center">
                        <span class="text-sm fw-semibold d-block">Taux de décaissement</span>
                        <span class="text-xs text-muted">0%</span>
                      </div>
                      <div class="progress mt-2" style="height: 6px;">
                        <div class="progress-bar" style="background-color: #004600; width: 0%"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      
      
      <!-- Graphique 1-->
      <div class="row">
        <div class="col-lg-12 col-md-6 mt-4 mb-4">
          <div class="card border-0 shadow-lg">
            <div class="card-body">
              <div class="row g-2">
                <!-- Evolution financière -->
                <div class="col-xl-6 col-md-6 h-50">
                  <div class="card border-0" style="background-color: #f5f5f5;">
                    <div class="card-header" style="background: linear-gradient(135deg, #004600, #007a00); font-weight: 600; color: white;">
                      <h6 class="mb-0" style="color: #ffffff">Évolution physique</h6>
                    </div>
                    <div class="card-body">
                      <canvas id="physiqueChart" height="150"></canvas>
                    </div>
                  </div>
                </div>
                <!-- Evolution physique -->
                <div class="col-xl-6 col-md-6 h-50">
                  <div class="card border-0" style="background-color: #f5f5f5;">
                    <div class="card-header" style="background: linear-gradient(135deg, #004600, #007a00); font-weight: 600; color: white;">
                      <h6 class="mb-0" style="color: #ffffff">Évolution Décaissement</h6>
                    </div>
                    <div class="card-body">
                      <canvas id="decaissementChart" height="150"></canvas>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      
      <!-- Graphique 1-->
      <div class="row">
        <div class="col-lg-12 col-md-6 mt-4 mb-4">
          <div class="card border-0 shadow-lg">
            <div class="card-body">
              <div class="row g-2">
                <!-- Evolution Globale -->
                <div class="col-xl-12 col-md-6 h-50">
                  <div class="card border-0" style="background-color: #f5f5f5;">
                    <div class="card-header" style="background: linear-gradient(135deg, #004600, #007a00); font-weight: 600; color: white;">
                      <h6 class="mb-0" style="color: #ffffff">Évolution comparative</h6>
                    </div>
                    <div class="card-body">
                      <canvas id="evolutionChart" height="100"></canvas>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
      </div>

      
      <!-- quatrieme ligne -->
      <div class="row">
        <!-- Liste probleme -->
        <style>
          /* Style pour permettre le retour à la ligne automatique dans toutes les colonnes */
          .table td {
            white-space: normal;
            word-wrap: break-word;
            max-width: 200px;
          }
        
          /* Style pour aligner verticalement le contenu au milieu */
          .table td, .table th {
            vertical-align: middle;
          }
        
          /* Style pour les badges avec icônes */
          .badge i {
            vertical-align: middle;
            font-size: 14px !important;
          }
        
          /* Style pour le header de la carte */
          .card-header {
            background-color: #004600;
            color: white;
            font-weight: bold;
          }
        
          /* Style pour le footer de la carte */
          .card-footer {
            background-color: #f8f9fa;
          }
        
          /* Style pour les boutons de pagination */
          .btn-outline-secondary {
            border-color: #004600;
            color: #004600;
          }
        
          .btn-outline-secondary:hover {
            background-color: #004600;
            color: white;
          }
        
          /* Style pour les cellules de tableau */
          .table th {
            background-color: #f1f1f1;
            color: #004600;
          }
        
          .table tr:hover {
            background-color: #e6f7e6;
          }
        
          /* Style pour le texte dans le tableau */
          .table td {
            color: #004600;
          }
        </style>
        
        <div class="col-lg-12 mt-4 mb-3">
          <div class="card border-0 shadow-sm">
            <div class="card-header px-4 py-3" style="background: linear-gradient(135deg, #004600, #007a00); font-weight: 600;">
              <h5 class="mb-0" style="color: #ffffff">Suivi des Problèmes</h5>
            </div>
            <div class="card-body p-0">
              <div class="table-responsive">
                <table class="table table-hover align-middle mb-0">
                  <thead class="bg-light">
                    <tr>
                      <th class="text-uppercase text-xs fw-semibold ps-4">Titre du Problème</th>
                      <th class="text-uppercase text-xs fw-semibold">Description</th>
                      <th class="text-uppercase text-xs fw-semibold">Date Identification</th>
                      <th class="text-uppercase text-xs fw-semibold">Typologie</th>
                      <th class="text-uppercase text-xs fw-semibold">Délai Mise en Œuvre</th>
                      <th class="text-uppercase text-xs fw-semibold pe-4">Solution Proposée</th>
                    </tr>
                  </thead>
                  <tbody id="liste_problemes">
                    <!-- Les problèmes seront ajoutés ici par JS -->
                    <tr>
                      <td colspan="6" class="text-center">Sélectionnez une composante pour voir les problèmes associés</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="card-footer border-top px-4 py-3 d-flex justify-content-between align-items-center">
              <div class="text-sm text-muted">
                Affichage <span class="fw-semibold">1-2</span> sur <span class="fw-semibold">2</span> problèmes
              </div>
              <div class="d-flex">
                <button class="btn btn-sm btn-outline-secondary me-2">
                  <i class="material-symbols-outlined">chevron_left</i>
                </button>
                <button class="btn btn-sm btn-outline-secondary">
                  <i class="material-symbols-outlined">chevron_right</i>
                </button>
              </div>
            </div>
          </div>
        </div>
        
      </div>

      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
       <script>
        // Fonction pour initialiser la page
        
        
        $(document).ready(function() {
          initPage();
          
          // Au début de votre script, initialisez les variables
          var charts = {
            decaissement: null,
            physique: null
          };

          // Fonction pour créer le graphique de décaissement
          function createDecaissementChart(composante) {
            const ctx = document.getElementById('decaissementChart');
            if (!ctx) {
              console.error("Element 'decaissementChart' not found");
              return;
            }
            // Détruire le graphique existant s'il y en a un
            if (charts.decaissement instanceof Chart) {
              charts.decaissement.destroy();
            }

            const data = {
              labels: ['T1', 'T2', 'T3', 'T4'],
              datasets: [
                {
                  label: 'Réel',
                  data: [
                    composante.dec_reel_t1,
                    composante.dec_reel_t2,
                    composante.dec_reel_t3,
                    composante.dec_reel_t4
                  ],
                  borderColor: '#004600',
                  backgroundColor: 'rgba(0, 70, 0, 0.1)',
                  tension: 0.3,
                  pointRadius: 6,
                  pointHoverRadius: 8
                },
                {
                  label: 'Prévisionnel',
                  data: [
                    composante.dec_prev_t1,
                    composante.dec_prev_t2,
                    composante.dec_prev_t3,
                    composante.dec_prev_t4
                  ],
                  borderColor: '#8c8c8c',
                  backgroundColor: 'rgba(140, 140, 140, 0.1)',
                  tension: 0.3,
                  pointRadius: 6,
                  pointHoverRadius: 8,
                  borderDash: [5, 5]
                }
              ]
            };

            charts.decaissement = new Chart(ctx.getContext('2d'), {
              type: 'line',
              data: data,
              options: {
                responsive: true,
                plugins: {
                  title: {
                    display: true,
                    font: {
                      size: 16
                    }
                  },
                  legend: {
                    position: 'bottom',
                    labels: {
                      boxWidth: 12,
                      padding: 20
                    }
                  }
                },
                scales: {
                  y: {
                    beginAtZero: true,
                    grid: {
                      color: 'rgba(0, 0, 0, 0.05)'

                    }
                  },
                  x: {
                    grid: {
                      display: false
                    }
                  }
                }
              }
            });
          }

          // Fonction pour créer le graphique physique
          function createPhysiqueChart(composante) {
            const ctx = document.getElementById('physiqueChart');
            if (!ctx) {
              console.error("Element 'physiqueChart' not found");
              return;
            }
            
            // Vérification et destruction du graphique existant
            if (charts.physique instanceof Chart) {
              charts.physique.destroy();
            }

            // Fonction helper pour gérer les valeurs null/undefined
            const safeValue = (value) => {
              if (value === null || value === undefined) return null;
              const num = parseFloat(value);
              return isNaN(num) ? null : num;
            };

            const data = {
              labels: ['T1', 'T2', 'T3', 'T4'],
              datasets: [
                {
                  label: 'Réel',
                  data: [
                    safeValue(composante.realise_t1_total),
                    safeValue(composante.realise_t2_total),
                    safeValue(composante.realise_t3_total),
                    safeValue(composante.realise_t4_total)
                  ],
                  borderColor: '#004600',
                  backgroundColor: 'rgba(0, 70, 0, 0.1)',
                  tension: 0.3,
                  pointRadius: 6,
                  pointHoverRadius: 8
                },
                {
                  label: 'Prévisionnel',
                  data: [
                    safeValue(composante.prev_t1_total),
                    safeValue(composante.prev_t2_total),
                    safeValue(composante.prev_t3_total),
                    safeValue(composante.prev_t4_total)
                  ],
                  borderColor: '#8c8c8c',
                  backgroundColor: 'rgba(140, 140, 140, 0.1)',
                  tension: 0.3,
                  pointRadius: 6,
                  pointHoverRadius: 8,
                  borderDash: [5, 5]
                }
              ]
            };

            charts.physique = new Chart(ctx.getContext('2d'), {
              type: 'line',
              data: data,
              options: {
                responsive: true,
                plugins: {
                  title: {
                    display: true,
                    font: {
                      size: 16
                    }
                  },
                  legend: {
                    position: 'bottom',
                    labels: {
                      boxWidth: 12,
                      padding: 20
                    }
                  }
                },
                scales: {
                  y: {
                    beginAtZero: true,
                    grid: {
                      color: 'rgba(0, 0, 0, 0.05)'
                    }
                  },
                  x: {
                    grid: {
                      display: false
                    }
                  }
                }
              }
            });
          }
          // Fonction pour créer le graphique Evolution comparative
          function createEvolutionChart(composante) {
            const ctx = document.getElementById('evolutionChart');
            if (!ctx) {
              console.error("Element 'evolutionChart' not found");
              return;
            }
            
            // Vérification et destruction du graphique existant
            if (charts.evolution instanceof Chart) {
              charts.evolution.destroy();
            }

            // Fonction helper pour gérer les valeurs null/undefined
            const safeValue = (value) => {
              if (value === null || value === undefined) return null;
              const num = parseFloat(value);
              return isNaN(num) ? null : num;
            };

            const data = {
              labels: ['T1', 'T2', 'T3', 'T4'],
              datasets: [
                {
                  label: 'Physique',
                  data: [
                    safeValue(composante.realise_t1_total),
                    safeValue(composante.realise_t2_total),
                    safeValue(composante.realise_t3_total),
                    safeValue(composante.realise_t4_total)
                  ],
                  borderColor: '#004600',
                  backgroundColor: 'rgba(0, 70, 0, 0.1)',
                  tension: 0.3,
                  pointRadius: 6,
                  pointHoverRadius: 8
                },
                {
                  label: 'Decaissement',
                  data: [
                    safeValue(composante.dec_reel_t1),
                    safeValue(composante.dec_reel_t2),
                    safeValue(composante.dec_reel_t3),
                    safeValue(composante.dec_reel_t4)
                  ],
                  borderColor: '#8c8c8c',
                  backgroundColor: 'rgba(140, 140, 140, 0.1)',
                  tension: 0.3,
                  pointRadius: 6,
                  pointHoverRadius: 8,
                  borderDash: [5, 5]
                }
              ]
            };

            charts.evolution = new Chart(ctx.getContext('2d'), {
              type: 'line',
              data: data,
              options: {
                responsive: true,
                plugins: {
                  title: {
                    display: true,
                    font: {
                      size: 16
                    }
                  },
                  legend: {
                    position: 'bottom',
                    labels: {
                      boxWidth: 12,
                      padding: 20
                    }
                  }
                },
                scales: {
                  y: {
                    beginAtZero: true,
                    grid: {
                      color: 'rgba(0, 0, 0, 0.05)',
                    max: 100,
                    }
                  },
                  x: {
                    grid: {
                      display: false
                    }
                  }
                }
              }
            });
          }

          function createGauge(containerId, value, maxValue, width = 180, height = 200) {
            var data = [{
              type: "indicator",
              mode: "gauge+number",
              value: value,
              gauge: {
                axis: { range: [0, maxValue] }
              }
            }];

            var layout = {
              autosize: false,
              width: width,
              height: height,
              margin: { l: 10, r: 10, t: 0, b: 10 }
            };

            Plotly.newPlot(containerId, data, layout);
          }

          var projets = [];
          var ministeres = [];
          var portefeuilles = [];
          var programmes = [];
          var axes = [];
          var composantes = [];
          var problemes = [];
          var messages_week = [];

          // Charger les données depuis l'API
          function loadData() {
            $.ajax({
              url: "{% url 'data_get_view' %}",  // Assurez-vous que l'URL est correcte
              type: "GET",
              dataType: "json",
              success: function(data) {
                projets = data.Projets;
                programmes = data.Programmes;
                portefeuilles = data.Portefeuilles;
                axes = data.Axes;
                composantes = data.Composantes;
                problemes = data.Problemes;
                messages_week=data.Messages_week;

                // Extraire les ministères uniques
                ministeres = [];
                for (var i = 0; i < projets.length; i++) {
                  if (projets[i].ministere_responsable && 
                      !ministeres.includes(projets[i].ministere_responsable)) {
                    ministeres.push(projets[i].ministere_responsable);
                  }
                }

                ministeres.sort();
                $("#ministere-dropdown-list").empty();
                for (var i = 0; i < ministeres.length; i++) {
                  var ministereItem = `
                    <li>
                      <a class="dropdown-item py-2 ministere-item" href="javascript:void(0);" data-ministere="${ministeres[i]}">
                        ${ministeres[i]}
                      </a>
                    </li>
                  `;
                  $("#ministere-dropdown-list").append(ministereItem);
                }
              },
              error: function(xhr, status, error) {
                console.error("Erreur lors du chargement des données:", error);
                $("#ministere-dropdown-list").html("<li><a class='dropdown-item'>Erreur de chargement</a></li>");
              }
            });
          }

          // Lors du clic sur un ministère, afficher les projets associés
          $(document).on("click", ".ministere-item", function(e) {
            e.preventDefault();
            var selectedMinistere = $(this).data('ministere');
            $("#selected-ministere").text(selectedMinistere);
            
            // Vider les sélections de programme et de projet
            $("#liste_programmes").empty();
            $("#selected-programme").text("Sélectionner un programme");
            $("#selected-composante").text("Sélectionner un programme");

            $("#liste_projets").empty();
            $("#selected-projet").text("Sélectionner un projet");

            $("#nb_projets_programme").empty();  // Réinitialiser le compteur de projets du programme si présent
            $("#nom_chef_projet").empty();
            $("#email_chef_projet").empty();
            $("#tel_chef_projet").empty();
            $("#nb_composantes_ouvertes").empty();
            $("#nb_composantes_terminees").empty();
            $("#nb_composantes_bloquees").empty();
            $("#nb_composantes_depriorisees").empty();
            $("#nb_composantes").empty();


            var projetsFiltres = projets.filter(function(projet) {
              return projet.ministere_responsable === selectedMinistere;
            });

            var nb_projets = projetsFiltres.length;
            var nb_projets_lances = projetsFiltres.filter(function(projet) {
              return projet.est_lance === true;
            }).length;

            $("#nb_projets").empty().append(nb_projets);
            $("#nb_projets_lances").empty().append(nb_projets_lances);

            // Afficher les programmes associés à ce ministère
            var programmeIds = projetsFiltres.map(p => p.programme_id);
            var programmeIdsUniques = [...new Set(programmeIds)];
            $("#nb_programmes").empty().append(programmeIdsUniques.length);
            

            // Trouver le portefeuille associé et son responsable
            var projet = projets.find(function(p) {
              return p.ministere_responsable === selectedMinistere;
            });

            if (projet) {
              var programme = programmes.find(function(pg) {
                return pg.id === projet.programme_id;
              });
              

              if (programme) {
                var portefeuille = portefeuilles.find(function(pf) {
                  return pf.id === programme.portefeuille_id;
                });

                if (portefeuille) {
                  var responsable = portefeuille.responsable;
                  $("#responsable_portefeuille").empty().append(responsable);

                  // Trouver l'axe
                  var axe = axes.find(function(ax) {
                    return ax.id === portefeuille.axe_id;
                  });

                  if (axe) {
                    $("#nom_axe").empty().append(axe.nom);
                  }
                }
              }
            }

            // Afficher les programmes uniques associés
            if (Array.isArray(programmes) && programmeIdsUniques.length > 0) {
              var programmesFiltres = programmes.filter(pg => programmeIdsUniques.includes(pg.id));

              $("#liste_programmes").empty();
              for (var i = 0; i < programmesFiltres.length; i++) {
                var programmeItem = `
                  <li>
                    <a class="dropdown-item py-2 programme-item" href="javascript:void(0);" data-programme-id="${programmesFiltres[i].id}">
                      ${programmesFiltres[i].nom}
                    </a>
                  </li>
                `;
                $("#liste_programmes").append(programmeItem);
              }
            }

            // Modifier la section problématique avec du code de débogage
            if (Array.isArray(composantes)) {
              // Récupérer toutes les composantes des projets du ministère sélectionné
              var idsProjets = projetsFiltres.map(p => p.id);
              
              var composantesFiltrees = composantes.filter(comp => idsProjets.includes(comp.projet_id));
              
              // Vérifier les statuts disponibles
              var statutsUniques = [...new Set(composantesFiltrees.map(c => c.etat))];
              // Vérifions chaque filtre séparément
              var satisfaisantArray = composantesFiltrees.filter(function(composante) {
                return composante.etat === 'En cours';
              });
              
              var alerteArray = composantesFiltrees.filter(function(composante) {
                return composante.etat === 'En cours avec difficulté mineure' || 
                      composante.etat === 'En cours avec difficulté majeure';
              });
              
              var dangerArray = composantesFiltrees.filter(function(composante) {
                return composante.etat === 'Bloquée';
              });
              
              
              var Satisfaisant = satisfaisantArray.length;
              var Alerte = alerteArray.length;
              var Danger = dangerArray.length;
              
              $("#Danger").empty().append(Danger);
              $("#Alerte").empty().append(Alerte);
              $("#Satisfaisant").empty().append(Satisfaisant);
              
            }
          });

          // Lors du clic sur un programme, afficher les projets relatifs
          $(document).on("click", ".programme-item", function(e) {
            e.preventDefault();
            var selectedProgrammeId = $(this).data('programme-id');
            var selectedMinistere = $("#selected-ministere").text();
            $("#selected-programme").text($(this).text()); // Affiche le programme sélectionné
            $("#nom_chef_projet").empty();
            $("#email_chef_projet").empty();
            $("#tel_chef_projet").empty();
            $("#nb_composantes_ouvertes").empty();
            $("#nb_composantes_terminees").empty();
            $("#nb_composantes_bloquees").empty();
            $("#nb_composantes_depriorisees").empty();
            $("#liste_composantes").empty();
            $("#nb_composantes").empty();
            $("#liste_projets").empty();
            $("#selected-projet").text("Sélectionner un projet");
            
            // Filtrer les projets associés au programme sélectionné
            var projetsFiltres = projets.filter(function(projet) {
              return projet.programme_id === selectedProgrammeId && projet.ministere_responsable === selectedMinistere;;
            });
            
            // Afficher les projets associés
            $("#liste_projets").empty();
            for (var i = 0; i < projetsFiltres.length; i++) {
              var projetItem = `
                <li>
                  <a href="javascript:void(0);" class="dropdown-item py-2 projet-item" data-projet-id="${projetsFiltres[i].id}">${projetsFiltres[i].nom}</a>
                </li>
              `;
              $("#liste_projets").append(projetItem);
            }

            // Afficher le nombre de projets pour ce programme
            $("#nb_projets_programme").empty().append(projetsFiltres.length);
          });
                  
          // Lors du clic sur un projet
          $(document).on("click", ".projet-item", function(e) {
            e.preventDefault();

            
          
            var selectedProjetId = $(this).data('projet-id');
            var selectedProjetNom = $(this).text();
            $("#selected-projet").text(selectedProjetNom);

            var selected_projet = projets.find(function(p) {
              return p.id === selectedProjetId;
            });

            if (selected_projet) {
              let nom_chef_projet = selected_projet.chef_projet;
              let email_chef_projet = selected_projet.email;
              let tel_chef_projet = selected_projet.tel;
              let ministere_responsable=selected_projet.ministere_responsable;

              $("#nom_chef_projet").empty().append(nom_chef_projet);
              $("#email_chef_projet").empty().append(email_chef_projet);
              $("#tel_chef_projet").empty().append(tel_chef_projet);
              $("#ministere_responsable").empty().append(ministere_responsable);

              const imgElement_responsable = document.getElementById("logoResponsable");

              if (imgElement_responsable && ministere_responsable) {
                imgElement_responsable.src = `/static/assets/img/logos/${ministere_responsable}.png`;
              }
              
            } else {
              console.warn("Projet non trouvé pour l'ID :", selectedProjetId);
            }
            
            // Filtrer les composantes liées à ce projet
            var composantesFiltres = composantes.filter(function(composante) {
              return composante.projet_id === selectedProjetId;
            });
            
            // Afficher le nombre de composantes
            var nb_composantes = composantesFiltres.length;
            var nb_composantes_ouvertes = composantesFiltres.filter(function(composante) {
              return composante.statut === 'En cours';
            }).length;
            var nb_composantes_terminees = composantesFiltres.filter(function(composante) {
              return composante.statut === 'Terminée';
            }).length;
            var nb_composantes_bloquees = composantesFiltres.filter(function(composante) {
              return composante.statut === 'Bloquée';
            }).length;
            var nb_composantes_depriorisees = composantesFiltres.filter(function(composante) {
              return composante.statut === 'Dépriorisée';
            }).length;
            
            $("#nb_composantes_ouvertes").empty().append(nb_composantes_ouvertes);
            $("#nb_composantes_terminees").empty().append(nb_composantes_terminees);
            $("#nb_composantes_bloquees").empty().append(nb_composantes_bloquees);
            $("#nb_composantes_depriorisees").empty().append(nb_composantes_depriorisees);
            $("#nb_composantes").empty().append(nb_composantes);
            
            // Créer les jauges pour afficher visuellement l'état des composantes
            createGauge("gauge_composantes_bloquees", nb_composantes_bloquees, nb_composantes);
            createGauge("gauge_composantes_depriorisees", nb_composantes_depriorisees, nb_composantes);
            createGauge("gauge_composantes_ouvertes", nb_composantes_ouvertes, nb_composantes);
            
            // Par cette version avec liste déroulante
            var dropdownMenu = $("#dropdown-composantes"); // L'élément <ul> du dropdown
            dropdownMenu.empty();

            if (composantesFiltres.length === 0) {
              dropdownMenu.append('<li><a class="dropdown-item disabled text-center">Aucune composante disponible</a></li>');
              $("#composanteDropdown").prop('disabled', true);
            } else {
              $("#composanteDropdown").prop('disabled', false);
              
              for (var i = 0; i < composantesFiltres.length; i++) {
                var item = `
                  <li>
                    <a class="dropdown-item composante-item py-2" 
                      href="javascript:void(0);" 
                      data-composante-id="${composantesFiltres[i].id}"
                      style="color: #004600;">
                      ${composantesFiltres[i].nom}
                    </a>
                  </li>
                `;
                dropdownMenu.append(item);
              }
            }
          });
          

          
          function initPage() {
            // Ajouter des tooltips à la carte
            document.querySelectorAll('#map path').forEach(path => {
              const regionName = path.getAttribute('data-region');
              
              path.addEventListener('mouseover', function(e) {
                const tooltip = document.getElementById('region-tooltip');
                tooltip.textContent = regionName;
                tooltip.style.display = 'block';
                tooltip.style.left = (e.pageX + 10) + 'px';
                tooltip.style.top = (e.pageY + 10) + 'px';
              });
              
              path.addEventListener('mouseout', function() {
                document.getElementById('region-tooltip').style.display = 'none';
              });
              
              path.addEventListener('mousemove', function(e) {
                const tooltip = document.getElementById('region-tooltip');
                tooltip.style.left = (e.pageX + 10) + 'px';
                tooltip.style.top = (e.pageY + 10) + 'px';
              });
            });
          }
          // Gérer le clic sur une composante
          $(document).on("click", ".composante-item", function(e) {
            e.preventDefault();
            var composanteId = $(this).data('composante-id');
            $("#selected-composante").text($(this).text());
            

            // Filtrer les problèmes liés à la composante sélectionnée
            var problemesFiltres = problemes.filter(function(probleme) {
              return probleme.composante_id === composanteId && probleme.remonter_tdb === true;
            });

            // Vider le tableau avant de le remplir
            var tbody = $("#liste_problemes");
            tbody.empty();

            if (problemesFiltres.length === 0) {
              tbody.append('<tr><td colspan="6" class="text-center">Aucun problème à remonter</td></tr>');
            } else {
              for (var i = 0; i < problemesFiltres.length; i++) {
                var ligne = `
                  <tr>
                    <td class="text-center">${problemesFiltres[i].titre}</td>
                    <td class="text-center">${problemesFiltres[i].description}</td>
                    <td class="text-center">${problemesFiltres[i].date_identification}</td>
                    <td class="text-center">${problemesFiltres[i].typologie}</td>
                    <td class="text-center">${problemesFiltres[i].delai_mise_en_oeuvre}</td>
                    <td class="text-center">${problemesFiltres[i].solution_proposee}</td>
                  </tr>
                `;
                tbody.append(ligne);
              }
            }

            // Filtrage des messages à afficher dans le tableau de bord
            var messagesFiltres = messages_week.filter(function(message_week) {
              return message_week.composante_id === composanteId && message_week.remonter_message_tdb === true;
            });

            // Construction du contenu HTML
            var contenu_message = "";
            if (messagesFiltres.length > 0) {
              messagesFiltres.forEach(function(msg) {
                contenu_message += "<p>" + msg.contenu + "</p>";
              });
            } else {
              contenu_message = "<p class='text-muted'>Aucun message à afficher pour cette composante.</p>";
            }

            $('#actionBtn').on('click', function () {
              $("#contenu_message").empty().append(contenu_message);
              const modal = new bootstrap.Modal(document.getElementById('messageModal'));
              modal.show();
            });

            // Nettoyage après fermeture du modal
            $('#messageModal').on('hidden.bs.modal', function () {
              // Supprime scroll lock si nécessaire
              $('body').removeClass('modal-open');

              // Supprime les couches noires en arrière-plan
              $('.modal-backdrop').remove();

              // (Optionnel) Réactive un bouton ou autre
              $('#actionBtn').focus();
            });

            // Récupérer les données de la composante sélectionnée
            var selected_composante = composantes.find(function(c) {
              return c.id === composanteId;
            });

            if (selected_composante) {
              let nom_composante = selected_composante.nom;
              let statut_composante = selected_composante.statut;
              let date_lancement = selected_composante.date_lancement;
              let agence_execution = selected_composante.agence_execution;
              let ministere_mise_en_oeuvre = selected_composante.tutelle;
              let financement = selected_composante.cout;
              let partenaire_pad = selected_composante.partenaire_pad;

              // Créer les graphiques pour cette composante
              createDecaissementChart(selected_composante);
              createPhysiqueChart(selected_composante);
              createEvolutionChart(selected_composante);


              
              
              // Mettre à jour les informations de la composante
              $("#nom_composante").empty().append(nom_composante);
              $("#statut_composante").empty().append(statut_composante);
              $("#date_lancement").empty().append(date_lancement);
              $("#agence_execution").empty().append(agence_execution);  
              $("#ministere_mise_en_oeuvre").empty().append(ministere_mise_en_oeuvre);
              $("#financement").empty().append(financement);
              $("#partenaire_pad").empty().append(partenaire_pad);

              

              // Met à jour dynamiquement l'image
              const imgElement_agence = document.getElementById("logoAgence");

              if (imgElement_agence && agence_execution) {
                imgElement_agence.src = `/static/assets/img/logos/${agence_execution}.png`;
              }

              const imgElement_mise = document.getElementById("logoMise");

              if (imgElement_mise && ministere_mise_en_oeuvre) {
                imgElement_mise.src = `/static/assets/img/logos/${ministere_mise_en_oeuvre}.png`;
              }

              // Mettre à jour la localisation
              var localisation = selected_composante.localisation;
              $("#localisation").text(localisation);
              
              // Réinitialiser les couleurs de toutes les régions
              $("#map path").attr("fill", "#cccccc");
              
              // Mappage des noms de régions aux identifiants SVG
              const regionMap = {
                "Dakar": "SN-DK",
                "Diourbel": "SN-DB",
                "Fatick": "SN-FK",
                "Kédougou": "SN-KE",
                "Kaffrine": "SN-KA",
                "Kaolack": "SN-KL",
                "Kolda": "SN-KD",
                "Louga": "SN-LG",
                "Matam": "SN-MT",
                "Sédhiou": "SN-SE",
                "Saint-Louis": "SN-SL",
                "Tambacounda": "SN-TC",
                "Thiès": "SN-TH",
                "Ziguinchor": "SN-ZG"
              };
              
              // Appliquer la couleur verte à la région concernée
              var svgId = regionMap[localisation];
              if (svgId) {
                $("#" + svgId).attr("fill", "#004600"); // Couleur verte
              } else {
                console.warn("Nom de région non reconnu :", localisation);
              }
              
            } else {
              console.warn("Composante non trouvée pour l'ID :", composanteId);
            }



            
            // PARTIE 2 : Avancement du projet
            // Récupérer et afficher les données d'avancement
            const trimestreData = getTrimestreData(selected_composante);
            const dec_reel = trimestreData.dec_reel || 0;
            const dec_prev = trimestreData.dec_prev || 0;
            const phy_reel = trimestreData.phy_reel || 0;
            const phy_prev = trimestreData.phy_prev || 0;
            
            // Calculer les valeurs cibles et taux (ou utiliser des valeurs par défaut si non définies)
            // Ces valeurs doivent être définies ou calculées selon votre logique métier
            const dec_cible = selected_composante.dec_cible || dec_prev; // Utilisez la valeur appropriée
            const taux_decaissement = (dec_reel / dec_prev * 100) || 0;
            const phys_cible = selected_composante.phys_cible || phy_prev; // Utilisez la valeur appropriée
            const avancement_physique = (phy_reel / phy_prev * 100) || 0;

            // Mettre à jour les éléments HTML avec ces informations
            $("#dec_reel").text(dec_reel + "%");
            $("#dec_prev").text(dec_prev + "%");
            $("#dec_cible").text(dec_cible + "%");
            $("#taux_decaissement").text(taux_decaissement + "%");
            $("#phy_reel").text(phy_reel + "%");
            $("#phy_prev").text(phy_prev + "%");
            $("#phys_cible").text(phys_cible + "%");
            $("#avancement_physique").text(avancement_physique + "%");

            $("#progress_dec_reel").css("width", (dec_reel) + "%");
            $("#progress_dec_prev").css("width", (dec_prev) + "%");
            $("#progress_dec_cible").css("width", (dec_cible) + "%");
            $("#progress_taux_decaissement").css("width", (taux_decaissement) + "%");

            $("#progress_phy_reel").css("width", (phy_reel) + "%");
            $("#progress_phy_prev").css("width", (phy_prev) + "%");
            $("#progress_phy_cible").css("width", (phys_cible) + "%");
            $("#progress_avancement_physique").css("width", (taux_decaissement) + "%");

          });
          
          /**
          * Détermine le trimestre actuel et retourne son suffixe
          * @returns {string} - Le suffixe à utiliser pour accéder aux propriétés (t1, t2, t3 ou t4)
          */
          function getCurrentTrimester() {
            const date = new Date();
            const month = date.getMonth() + 1; // getMonth() retourne 0-11
            
            // Déterminer le trimestre en fonction du mois
            if (month >= 1 && month <= 3) {
                return "t1";
            } else if (month >= 4 && month <= 6) {
                return "t2";
            } else if (month >= 7 && month <= 9) {
                return "t3";
            } else {
                return "t4";
            }
          }

          /**
          * Récupère les données du composant selon le trimestre actuel
          * @param {Object} selected_composante - L'objet composante sélectionné
          * @returns {Object} - Les données du trimestre actuel
          */
          function getTrimestreData(selected_composante) {
            // Obtenir le suffixe du trimestre actuel
            const trimestre = getCurrentTrimester();
            
            // Créer les clés dynamiquement
            const dec_reel_key = `dec_reel_${trimestre}`;
            const dec_prev_key = `dec_prev_${trimestre}`;
            const phy_reel_key = `realise_${trimestre}_total`;
            const phy_prev_key = `prev_${trimestre}_total`;
            
            // Retourner les données pour le trimestre actuel
            return {
                dec_reel: selected_composante[dec_reel_key] || 0,
                dec_prev: selected_composante[dec_prev_key] || 0,
                phy_reel: selected_composante[phy_reel_key] || 0,
                phy_prev: selected_composante[phy_prev_key] || 0
            };
          }
          // Charger les données initiales
          loadData();
        });
      </script>  
    
      


    

      
      <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Réinitialiser la vue de la carte
            document.getElementById('reset-map-view')?.addEventListener('click', function() {
                if (window.map) {
                    window.map.setView([14.4974, -14.4524], 7);
                }
            });
        });
      </script>
      <footer class="footer py-4  ">
        <div class="container-fluid">
          <div class="row align-items-center justify-content-lg-between">
            <div class="col-lg-6 mb-lg-0 mb-4">
              <div class="copyright text-center text-sm text-muted text-lg-start">
                © <script>
                  document.write(new Date().getFullYear())
                </script>, BOCS-primature
              </div>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </main>
  
  {% endblock%}